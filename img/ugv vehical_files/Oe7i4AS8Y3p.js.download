if (self.CavalryLogger) { CavalryLogger.start_js(["O5mPw"]); }

__d("MAria",["createArrayFromMixed"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(t){if(t.length>1)return Array.from(t);return h(t[0])}function j(t){if(!t)return null;return t.getAttribute("aria-hidden")==="true"}function k(t){if(!t)return;t=i(arguments);for(var u=0,v=t.length;u<v;u++)t[u].setAttribute("aria-hidden","false")}function l(t){if(!t)return;t=i(arguments);for(var u=0,v=t.length;u<v;u++)t[u].setAttribute("aria-hidden","true")}function m(t){if(!t)return;t=i(arguments);for(var u=0,v=t.length;u<v;u++)if(j(t[u]))k(t[u]);else l(t[u])}function n(t,u){if(!t)return;if(u===null)t.removeAttribute("aria-label");else t.setAttribute("aria-label",u)}function o(t){if(!t)return null;var u=t.getAttribute("aria-label");return u!==null&&u!==""}function p(t,u){t.setAttribute("aria-haspopup","true");t.setAttribute("aria-controls",u.getAttribute("id"));r(t,u)}function q(t,u){t.setAttribute("aria-pressed","true");if(u){u.setAttribute("aria-hidden","false");u.setAttribute("aria-expanded","true")}}function r(t,u){t.setAttribute("aria-pressed","false");if(u){u.setAttribute("aria-hidden","true");u.setAttribute("aria-expanded","false")}}var s={show:k,hide:l,isHidden:j,toggleVisibility:m,setLabel:n,hasLabel:o,setupPopup:p,showPopup:q,hidePopup:r};f.exports=s}),null);
__d("MLogoutClearCache",["MCache","Stratcom"],(function a(b,c,d,e,f,g,h,i){i.listen("click","logout",h.clear)}),null);
__d("MVerifyCache",["MCache"],(function a(b,c,d,e,f,g,h){var i=function i(j){var k=h.VIEWER_KEY,l=h.getItem(k);if(l!==j.viewer){l&&h.clear();h.setItem(k,j.viewer,true)}};g.main=i}),null);
__d("MPageError",["$","DOM","LoadingIndicator","MErrorCodes","FBLogger","MPageController","Stratcom"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=h("mErrorView"),p=i.find(o,"div","error-message");n.listen("click","MPageError:retry",m.reload);n.listen("m:page:loading",null,function(q){i.hide(o)});n.listen("m:page:error",null,function(q){var r=q.getData(),s=k.getMessage(r);j.hide();i.setContent(p,s);i.show(o);l("FIXME").warn("Error code: %s",r)})}),null);
__d("MPageHeaderAccessibility",["Stratcom","MAria","DOM"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=document.body,l=j.scry(k,"*","mChromeHeaderCenter")[0],m=j.scry(k,"*","mChromeHeaderRight")[0],n=document.getElementById("root");function o(q){if(q)i.show(q)}function p(q){if(q)i.hide(q)}h.listen("m:side-area:show",null,function(q){p(l);p(m);p(n)});h.listen("m:side-area:hide",null,function(q){o(l);o(m);o(n)});f.exports={}}),null);
__d("MExceptionHandler",["ErrorUtils","FBLogger"],(function a(b,c,d,e,f,g,h,i){if(window.onerror!==h.onerror)i("FIXME").mustfix("ErrorUtils failed to assign window.onerror handler");function j(k,l){i("mobile_exception_handler").mustfix("fwHandleException: %s, context: %s",k,l)}b.fwHandleException=j}),null);
__d("DeviceBasedLoginRedesignChooserUser",["EventListener","Keys"],(function a(b,c,d,e,f,g,h,i){var j={attachHandlerToElement:function k(l,m){h.listen(l,"click",function(){m.submit()});h.listen(l,"keyup",function(n){if(n.keyCode===i.RETURN)m.submit()})}};f.exports=j}),null);
__d("MExceptionReportingMarauderLogger",["ErrorUtils"],(function a(b,c,d,e,f,g,h){function i(k){e(["MarauderLogger"],function(l){l.log("js_exception",undefined,k);k=null})}function j(k,l,m){i({message:k,context:l,stack_trace:m})}h.addListener(function(k){i(k)});f.exports.log=j}),null);
__d("VisibilityListener",[],(function a(b,c,d,e,f,g){"use strict";var h={getHiddenTime:function i(j,k){throw new Error("not supported here")},supported:function i(){return false}};f.exports=h}),null);
__d("MPopupSmallCta",["MAnimator","Style","MViewport","ge"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=150,m=1e3,n=214,o={show:function p(q,r,s){this._expandingCta=q;this._ctaUnit=r;this._closeIcon=s;this._ctaVisible=false;this._ctaShownOnce=false;this._ctaClosed=false;window.addEventListener("load",this._init.bind(this))},_init:function p(){__p&&__p();var q=k("header"),r=k("header-notices"),s=k("mobile_login_bar");this._scrollThreshold=0;this._height=n;if(q){i.set(q,"z-index","0");var t=q.clientHeight;if(t)this._scrollThreshold+=t}if(r){i.set(r,"z-index","0");var u=r.clientHeight;if(u)this._scrollThreshold+=u}if(s){var v=s.clientHeight;if(v){this._scrollThreshold+=v;this._height=v}}setInterval(this._updateCTA.bind(this),m);this._closeIcon.addEventListener("click",function(w){this._ctaClosed=true;this._hideCTA()}.bind(this))},_hideCTA:function p(){var q=this._expandingCta.clientHeight;h.play(q,0,l,function(r){return i.set(this._expandingCta,"height",Math.round(r)+"px")}.bind(this));this._ctaVisible=false;clearTimeout(this._timerId)},_showCTA:function p(){if(this._ctaVisible)return;i.set(this._ctaUnit,"margin-top","0px");i.set(this._expandingCta,"background","none");h.play(0,this._height,l,function(q){return i.set(this._expandingCta,"height",Math.round(q)+"px")}.bind(this));this._ctaVisible=true;this._ctaShownOnce=true;clearTimeout(this._timerId)},_updateCTA:function p(){__p&&__p();var q=j.getHeight();if(q<this._height)if(this._ctaVisible)this._hideCTA();else return;var r=this._scrollThreshold;if(!this._ctaVisible&&!this._ctaClosed&&j.getScrollTop()>r)this._showCTA();if(this._ctaVisible&&j.getScrollTop()<r)this._hideCTA()}};f.exports=o}),null);
__d("TimeSpentArray",["Banzai","TimeSlice","pageID","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=2,m=l*32,n,o,p,q,r,s,t,u,v,w={},x;function y(){return{timeoutDelayMap:w,nextDelay:x,timeoutInSeconds:p}}function z(){if(n){var H=Date.now();if(H>r)t=Math.min(m,Math.ceil(H/1e3-q));var I=E();if(I)n(I,x)}D()}function A(){B();o=k(i.guard(z,"TimeSpentArray Timeout",{propagationType:i.PropagationType.ORPHAN}),p*1e3)}function B(){if(o){clearTimeout(o);o=null}}function C(H){__p&&__p();q=H;r=q*1e3;s=[1];for(var I=1;I<l;I++)s.push(0);t=1;u+=1;v+=1;var J=v.toString()+"_delay";x=w[J];if(x===undefined)x=w.delay;var K=v.toString()+"_timeout",L=w[K];if(L===undefined)L=w.timeout;L=Math.min(L,m);p=L||m;A()}function D(){B();s=null}function E(){if(!s)return null;return{tos_id:j,start_time:q,tos_array:s.slice(0),tos_len:t,tos_seq:v,tos_cum:u}}function F(H){if(H>=r&&H-r<1e3)return;G(Math.floor(H/1e3))}function G(H){__p&&__p();var I=H-q;if(I<0||I>=m)z();if(!s)C(H);else{s[I>>5]|=1<<(I&31);t=I+1;u+=1;r=H*1e3}}f.exports={init:function H(I,J,K){__p&&__p();u=0;v=-1;n=I;if(typeof J=="object"&&J!==null)w=J;else w={};if(!K)K=Date.now();C(Math.floor(K/1e3));h.subscribe(h.SHUTDOWN,z)},update:function H(I){F(I)},get:function H(){return E()},ship:function H(){z()},reset:function H(){D()},testState:function H(){return y()}}}),null);
__d("TimeSpentImmediateActiveSecondsLogger",["Banzai","ImmediateActiveSecondsConfig","ScriptPath"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k="immediate_active_seconds",l={signal:true,retry:true},m=i.sampling_rate,n=i.ias_bucket,o=0;function p(r){if(m<=0)return false;var s=Math.floor(r/1e3)%m;return s===n}function q(r){if(r>=o&&r-o<1e3)return;if(p(r)){var s={activity_time_ms:r,last_activity_time_ms:o,script_path:j.getTopViewEndpoint()};try{h.post(k,s,l)}catch(t){}}o=Math.floor(r/1e3)*1e3}f.exports={maybeReportActiveSecond:q}}),null);
__d("MTimeSpentBitArrayLogger",["Banzai","BanzaiODS","Stratcom","MarauderLogger","TimeSpentArray","TimeSpentImmediateActiveSecondsLogger","Visibility","isInIframe"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();function p(){l.ship()}function q(){var u=Date.now();l.update(u);m.maybeReportActiveSecond(u)}function r(u){k.log("time_spent_bit_array",undefined,u,undefined,undefined,undefined,Date.now())}function s(){return["gesturestart","mousedown","touchstart","scroll","keydown"]}function t(){var u=s();j.listen(u,null,q);var v="onpagehide"in window?["pagehide","blur"]:["blur"];j.listen(v,null,p);n.addListener("hidden",p)}f.exports={init:function u(v){if(o())return;var w=Date.now();l.init(r,null,w);t();m.maybeReportActiveSecond(w);i.bumpEntityKey("ms.time_spent.qa."+v,"time_spent.bits.js_initialized")},getMonitoredEvents:s}}),null);
__d("MTabbable",["MAria","MJSEnvironment","MViewport","isNodeWithinRect"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();function l(o,p){while(o&&o!==p){if(h.isHidden(o))return true;o=o.parentNode}return false}function m(o,p){if(o.offsetHeight===0||o.offsetWidth===0||window.getComputedStyle(o).visibility==="hidden"||parseInt(o.tabIndex,10)<0||l(o,p))return false;if(o.tabIndex>=0)return true;switch(o.tagName){case"A":return o.href&&o.rel!="ignore";case"INPUT":return o.type!="hidden"&&o.type!="file"&&!o.disabled;case"BUTTON":case"SELECT":case"TEXTAREA":return!o.disabled}return false}function n(o){if(!o.getBoundingClientRect)return;var p=i.IS_APPLE_WEBKIT_IOS&&parseFloat(i.OS_VERSION)>=8||i.BROWSER_NAME==="Safari"&&!i.IS_APPLE_WEBKIT_IOS,q=p?o.querySelectorAll("a, button, select, [tabindex]"):o.querySelectorAll("a, button, input, select, textarea, [tabindex]"),r=j.getBoundingRect();for(var s=0,t;t=q[s];s++)if(m(t,o)&&k(t,r)){t.focus();return}}g.focusTabbable=n}),null);
__d("MBackButton",["Stratcom"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=false,j=function j(){if(i)return;i=true;h.listen("click","back-button",function(event){if(history.length>1){event.prevent();history.go(-1)}})};g.main=j}),null);
__d("MModalDialogInit",["MModalDialog"],(function a(b,c,d,e,f,g,h){if(!b.FW_ENABLED)h.init()}),null);
__d("XConsentCookieController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/cookie/consent/",{})}),null);
__d("XRefererFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/common/referer_frame.php",{})}),null);
__d("DeferredCookie",["Cookie","Env","Map","SubscriptionList","XAsyncRequest","XConsentCookieController"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n=new j(),o={shouldAddDefaultListener:true,defaultHandler:null,autoFlushCookies:false,sentConsentToServer:false,callbacks:new k(),addToQueue:function p(q,r,s,t,u,v,w){__p&&__p();if(this.autoFlushCookies){if(u)h.setWithoutChecksIfFirstPartyContext(q,r,s,t,w);else h.setWithoutChecks(q,r,s,t,w);return}if(n.has(q))return;n.set(q,{name:q,value:r,nMilliSecs:s,path:t,firstPartyOnly:u,secure:w});if(v)this.addDefaultInteractionListener()},flushAllCookiesWithoutRequestingConsentSeePrivacyXFNBeforeUsing:function p(){delete i.defer_cookies;n.forEach(function(q,r){if(q.firstPartyOnly)h.setWithoutChecksIfFirstPartyContext(q.name,q.value,q.nMilliSecs,q.path,q.secure);else h.setWithoutChecks(q.name,q.value,q.nMilliSecs,q.path,q.secure)});this.callbacks.fireCallbacks();this.autoFlushCookies=true;n=new j();this.removeDefaultInteractionListener()},flushAllCookies:function p(){this.flushAllCookiesWithoutRequestingConsentSeePrivacyXFNBeforeUsing();if(!this.sentConsentToServer){this.sentConsentToServer=true;var q=m.getURIBuilder().getURI();new l(q).send()}},removeDefaultInteractionListener:function p(){if(this.defaultHandler){if(window.removeEventListener)window.removeEventListener("click",this.defaultHandler,true);else if(document.detachEvent)document.detachEvent("onclick",this.defaultHandler);this.defaultHandler=null}},addDefaultInteractionListener:function p(){if(this.shouldAddDefaultListener){this.shouldAddDefaultListener=false;this.defaultHandler=this.baseInteractionHandler.bind(this);if(window.addEventListener)window.addEventListener("click",this.defaultHandler,true);else if(document.attachEvent)document.attachEvent("onclick",this.defaultHandler)}},registerCallbackOnCookieFlush:function p(q){if(this.autoFlushCookies)q();else this.callbacks.add(q)},baseInteractionHandler:function p(){this.flushAllCookies()},canEmbedThirdPartyPixel:function p(){if(i.no_cookies||i.defer_cookies)return false;return this.autoFlushCookies||n.size===0}};f.exports=o}),null);
__d("isBonfireURI",[],(function a(b,c,d,e,f,g){var h=new RegExp("(^|\\.)(get|my)bonfire\\.com$","i"),i=["https"];function j(k){if(k.isEmpty()&&k.toString()!=="#")return false;if(!k.getDomain()&&!k.getProtocol())return false;return i.indexOf(k.getProtocol())!==-1&&h.test(k.getDomain())}f.exports=j}),null);
__d("isMessengerDotComURI",[],(function a(b,c,d,e,f,g){var h=new RegExp("(^|\\.)messenger\\.com$","i"),i=["https"];function j(k){if(k.isEmpty()&&k.toString()!=="#")return false;if(!k.getDomain()&&!k.getProtocol())return false;return i.indexOf(k.getProtocol())!==-1&&h.test(k.getDomain())}f.exports=j}),null);
__d("isOculusDotComURI",["URI"],(function a(b,c,d,e,f,g,h){var i=new RegExp("(^|\\.)oculus\\.com$","i"),j=["https"];function k(l){if(l.isEmpty()&&l.toString()!=="#")return false;if(!l.getDomain()&&!l.getProtocol())return false;return j.indexOf(l.getProtocol())!==-1&&i.test(l.getDomain())}f.exports=k}),null);
__d("NavigationMetricsEnumJS",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NAVIGATION_START:"navigationStart",UNLOAD_EVENT_START:"unloadEventStart",UNLOAD_EVENT_END:"unloadEventEnd",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",SECURE_CONNECTION_START:"secureConnectionStart",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading",DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED_EVENT_START:"domContentLoadedEventStart",DOM_CONTENT_LOADED_EVENT_END:"domContentLoadedEventEnd",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"})}),null);
__d("LogHistoryListeners",["Clock","ErrorUtils","LogHistory"],(function a(b,c,d,e,f,g,h,i){var j=c("LogHistory").getInstance("sys");h.addListener(h.ANOMALY,function(k){j.warn("clock_anomaly",h.getSamples())});i.addListener(function(k){j.error("error",JSON.stringify({guard:k.guard,line:k.line,message:k.message,script:k.script,stack:k.stack}))})}),null);
__d("ScriptPathLogger",["Banzai","CurrentUser","ScriptPath","TimeSpentPageTransitionCause","URI","isInIframe"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n="script_path_change",o={scriptPath:null,categoryToken:null,extraData:{}},p=false,q="imp_id";function r(B){__p&&__p();var C=l.getNextURI?l.getNextURI():new l(window.location.href),D=C.getQueryData(),E=C.getPath();if(E.endsWith("/"))E=E.substr(0,E.length-1);var F=s(E,D);if(F){B.content_id=F;return}var G=t(E);if(G!==""){B.dest_topic_feed=G;return}if(u(E)){var H=D.queue_id;if(H)B.dest_srt_queue_id=H;return}}function s(B,C){__p&&__p();if(C.story_fbid)return C.story_fbid;if(C.fbid)return C.fbid;if(C.view==="permalink"&&C.id)return C.id;var D=/\/(posts|videos|notes|groups\/.*\/permalink)\//,E=/^[0-9]+$/;if(D.test(B)){var F=B.split("/"),G=F[F.length-1];if(E.test(G))return G}return""}function t(B){if(!B||B.search("/feed/topics/")==-1)return"";var C=B.split("/");return C[C.length-1]}function u(B){return!!B&&B.search("/intern/review/")!==-1}function v(B,C,D,E){__p&&__p();if(!p||m())return;var F=i.isLoggedIn(),G=F?h.VITAL:h.BASIC;if(F){E=E||{};E.via_banzai_vital="1"}var H={source_path:B.scriptPath,source_token:B.categoryToken,dest_path:C.scriptPath,dest_token:C.categoryToken,impression_id:C.extraData?C.extraData.imp_id:null,cause:D},I=D===k.PAGE_UNLOAD;if(!I)r(H);if(E!=null){var J=E,K=J.snowlift_content_id;if(!I&&K!=null){H.content_id=K;delete E.snowlift_content_id}H.extra_data=E}if(B.scriptPath===null)H.referrer=document.referrer;var L=j.getClickPointInfo();if(L)H.click_point_info=L;if(B.extraData)for(var M in B.extraData)if(M!=q)H["source_"+M]=B.extraData[M];if(C.extraData)for(var N in C.extraData)if(N!=q)H["dest_"+N]=C.extraData[N];if(B.topViewEndpoint)H.source_endpoint=B.topViewEndpoint;if(C.topViewEndpoint)H.dest_endpoint=C.topViewEndpoint;if(B.restored)H.source_restored=true;h.post(n,H,G);j.setClickPointInfo(null)}function w(){v(j.getSourcePageInfo()||o,j.getPageInfo()||o,k.PAGE_LOAD)}function x(B,C,D){v(B,C,k.TRANSITION,D)}function y(){v(j.getPageInfo()||o,o,k.PAGE_UNLOAD);j.shutdown()}var z=j.subscribe(function(B){if(p){var C=B.source,D=B.dest,E=B.cause,F=B.extraData;if(E)v(C||o,D||o,E,F);else if(C)x(C,D||o,F);else w()}});h.subscribe(h.SHUTDOWN,y);var A={startLogging:function B(){p=true;if(j.getPageInfo())w()},stopLogging:function B(){p=false;z.remove()},BANZAI_LOGGING_ROUTE:n};f.exports=A}),null);
__d("NavigationTimingHelper",["NavigationMetricsEnumJS","forEachObject","performance"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();function k(m,n){var o={};i(h,function(p){var q=n[p];if(q)o[p]=q+m});return o}var l={getAsyncRequestTimings:function m(n){if(!n||!j.timing||!j.getEntriesByName)return undefined;var o=j.getEntriesByName(n);if(o.length===0)return undefined;return k(j.timing.navigationStart,o[0])},getNavTimings:function m(){if(!j.timing)return undefined;return k(0,j.timing)}};f.exports=l}),null);
__d("PerfXFlusher",["Banzai","invariant"],(function a(b,c,d,e,f,g,h,i){var j="perfx_custom_logger_endpoint",k=["perfx_page","perfx_page_type","lid"];function l(n){k.forEach(function(o){return i(o in n,'PerfXFlusher: Field "%s" missing in the PerfX payload',o)})}var m={flush:function n(o){l(o);h.post(j,o,{signal:true})},registerToSendWithBeacon:function n(o){h.registerToSendWithBeacon(j,o)}};f.exports=m}),null);
__d("QuicklingRefreshOverheadUtil",["QuicklingConfig","WebStorage","performanceAbsoluteNow"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=null,l=1e4,m={onQuicklingStart:function n(){k=j()},onQuicklingVersionMatch:function n(){k=null},onQuicklingRefreshStart:function n(){if(!h.logRefreshOverhead||k===null)return;var o=i.getSessionStorage();if(!o)return;o.setItem("quickling_refresh_overhead",(j()-k).toString());o.setItem("quickling_refresh_start",Date.now().toString())},getOverhead:function n(o){__p&&__p();if(!h.logRefreshOverhead)return null;var p=i.getSessionStorageForRead();if(!p)return null;var q=p.getItem("quickling_refresh_start");if(q==null)return null;if(o-parseInt(q,10)>l)return null;var r=p.getItem("quickling_refresh_overhead");return r!=null?parseFloat(r):null}};f.exports=m}),null);
__d("pageLoadedViaSWCache",[],(function a(b,c,d,e,f,g){function h(){return self.__SW_CACHE__===1}f.exports=h}),null);
__d("PerfXLogger",["ArtilleryOnUntilOffLogging","DataAttributeUtils","NavigationMetrics","NavigationTimingHelper","PerfXFlusher","QuicklingRefreshOverheadUtil","Set","VisibilityListener","forEachObject","pageLoadedViaSWCache","performanceAbsoluteNow","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();var t={},u={},v=65*1e3,w=["e2e","tti","all_pagelets_displayed","all_pagelets_loaded","artillery_disable_time"],x={},y={_listenersSetUp:false,_setupListeners:function z(){__p&&__p();if(this._listenersSetUp)return;this._subscribeToNavigationMetrics();l.registerToSendWithBeacon(function(){var A=[];p(t,function(B,C){if(!t[C].sent){var D=this.getPayload(C,"unload fired");if(D!=null)A.push(D)}}.bind(this));t={};return A}.bind(this));this._listenersSetUp=true},_init:function z(A){__p&&__p();var B=A.lid;if(B==null)return;var C=u[B]||[];delete u[B];if(A.sw_controlled_tags){if(navigator.serviceWorker&&navigator.serviceWorker.controller)for(var D=0;D<A.sw_controlled_tags.length;D++)C.push(A.sw_controlled_tags[D]);delete A.sw_controlled_tags}t[B]=babelHelpers["extends"]({tags:new n(C),sent:false},A);this._registerTimeoutSendback(B);this._setupListeners()},initWithNavigationMetricsLID:function z(A,B){__p&&__p();var C=j.getFullPageLoadLid();if(!C)return;this._init(babelHelpers["extends"]({},B,{lid:C}));if(A&&A.always)for(var D=0;D<A.always.length;D++)y.addTag(C,A.always[D]);if(A&&A.swCache&&q())for(var E=0;E<A.swCache.length;E++)y.addTag(C,A.swCache[E])},init:function z(A,B){if(B!=null&&A.lid!=null)x[A.lid]=B;this._init(A)},addTag:function z(A,B){var C=t[A];if(C){C.tags.add(B);return}if(!u[A])u[A]=[];u[A].push(B)},addTagWithNavigationMetricsLID:function z(A){var B=j.getFullPageLoadLid();if(!B)return;y.addTag(B,A)},_registerTimeoutSendback:function z(A){var B=this._getFetchStart(A),C=v;if(B!=null)C-=r()-B;s(function(){return this._uploadPayload(A,"sendback time out")}.bind(this),C)},_subscribeToNavigationMetrics:function z(){__p&&__p();j.addRetroactiveListener(j.Events.EVENT_OCCURRED,function(A,B){if(!(A in t))return;if(w.includes(B.event)&&Object.prototype.hasOwnProperty.call(B,"timestamp")&&B.timestamp!=null)t[A][B.event]=B.timestamp});j.addRetroactiveListener(j.Events.NAVIGATION_DONE,function(A,B){var C=B.serverLID;if(!(C in t))return;w.forEach(function(event){if(Object.prototype.hasOwnProperty.call(B,event)&&B[event]!=null)t[C][event]=B[event]});this._uploadPayload(C)}.bind(this))},_getPayloadWithOffset:function z(A,B,C){__p&&__p();var D=t[A];if(D==null)return null;var E=Object.assign({},D),F=document.querySelector('[id^="hyperfeed_story_id"]');if(F){var G=JSON.parse(i.getDataFt(F));if(G)E.mf_query_id=G.qid}E.tags=Array.from(D.tags);if(!E.art_id)E.artillery_disable_time=h.lastDisableTime();this._adjustValues(E,B);E.fetch_start=B;if(E.perfx_page_type==="normal"){var H=k.getNavTimings();if(H!=null&&H.navigationStart!=null)E.nav_to_fetch=B-H.navigationStart;var I=m.getOverhead(B);if(I!==null)E.quickling_refresh_overhead=I}if(C!=null)E.sendback_reason=C;if(navigator&&navigator.hardwareConcurrency)E.num_cores=navigator.hardwareConcurrency;if(navigator&&navigator.deviceMemory)E.ram_gb=navigator.deviceMemory;if(navigator&&navigator.connection){if(typeof navigator.connection.downlink==="number")E.downlink_megabits=navigator.connection.downlink;if(typeof navigator.connection.effectiveType==="string")E.effective_connection_type=navigator.connection.effectiveType;if(typeof navigator.connection.rtt==="number")E.rtt_ms=navigator.connection.rtt}if(o.supported()&&E.fetch_start&&E.all_pagelets_displayed&&E.tti&&E.e2e){E.tab_hidden_time_dd=o.getHiddenTime(E.fetch_start,E.fetch_start+E.all_pagelets_displayed);E.tab_hidden_time_tti=o.getHiddenTime(E.fetch_start,E.fetch_start+E.tti);E.tab_hidden_time_e2e=o.getHiddenTime(E.fetch_start,E.fetch_start+E.e2e)}delete E.sent;return E},_uploadPayload:function z(A,B){if(t[A]!=null&&!t[A].sent){var C=this.getPayload(A,B);if(C!=null){l.flush(C);t[A].sent=true}}},getPayload:function z(A,B){return this._getPayloadWithOffset(A,this._getFetchStart(A),B)},_getFetchStart:function z(A){__p&&__p();if(!(A in t))return null;var B=void 0,C=t[A].perfx_page_type;if(C=="quickling")if(!(A in x))return null;else B=k.getAsyncRequestTimings(x[A]);else B=k.getNavTimings();if(!B||!B.fetchStart)return null;return B.fetchStart},_adjustValues:function z(A,B){w.forEach(function(C){if(Object.prototype.hasOwnProperty.call(A,C))A[C]-=B})}};f.exports=y}),null);
__d("ControlledReferer",["Bootloader","DeferredCookie","URI","UserAgent","XRefererFrameController","isBonfireURI","isMessengerDotComURI","isOculusDotComURI","lowerFacebookDomain"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q={useFacebookReferer:function r(s,t,u){__p&&__p();if(!i.canEmbedThirdPartyPixel()){h.loadModules(["BanzaiODS"],function(y){y.bumpEntityKey("defer_cookies","block_controlled_referer_iframe")},"ControlledReferer");return}var v=false;function w(){if(v)return;var y=s.contentWindow.location.pathname;if(y!=="/intern/common/referer_frame.php"&&y!=="/common/referer_frame.php")return;v=true;s.contentWindow.document.body.style.margin=0;t()}var x=void 0;if(n(j.getRequestURI())||m(j.getRequestURI()))x=l.getURIBuilder().getURI().toString();else if(o(j.getRequestURI()))x="/common/referer_frame.php";else if(!p.isValidDocumentDomain())x="/intern/common/referer_frame.php";else if(k.isBrowser("Opera"))x=l.getURIBuilder().getURI().toString();else x=l.getURIBuilder().getURI().qualify().setProtocol("https").setSubdomain("staticxx").toString();if(u)x+="?fb_source="+u;s.onload=w;s.src=x},useFacebookRefererHtml:function r(s,t,u){q.useFacebookReferer(s,function(){s.contentWindow.document.body.innerHTML=t},u)}};f.exports=q}),null);