if (self.CavalryLogger) { CavalryLogger.start_js(["ddfNZ"]); }

__d("MChat",["Bootloader","ChannelEventType","DOM","Stratcom","MChannelManager","MTouchChannelManager","$"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();var o=function o(q){__p&&__p();m.initialize();if(q.killDynatemplate)k.listen([i.MESSAGE,i.PAGES_MESSAGE],null,function(event){p(q,event);k.removeCurrentListener()});else h.loadModules(["MMessages"],function(r){var s=new r(q),t=[k.listen([i.MESSAGE,i.PAGES_MESSAGE],null,s.handleMessageReceived.bind(s)),k.listen("typ",null,s.handleUserTyping.bind(s))];k.listen("m:page:unload",null,function(){s=null;for(var u=0;u<t.length;u++)t[u].remove();t=[];k.removeCurrentListener()})},"MChat");if(q.pageID)l.subscribeIrisQueue(q.pageID.toString(),"0")};function p(q,event){h.loadModules(["MReactComponentRenderer","MMessageThread.react"],function(r,s){var t=j.create("div"),u={downloadLink:q.downloadLink,initialEvent:event,isCanonical:q.isCanonicalThread,otherUserFBID:q.messageOtherUserFBID,pageID:q.pageID,shouldParseEmoticons:q.parseEmoticons,threadFBID:q.messageThreadFBID,userProfileUris:q.usersProfileUri,userShortNames:q.usersShortNames};r(s,t,u);j.appendContent(n("messageGroup"),t)},"MChat")}g.main=o}),null);
__d("MMessagesReadReceipts",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=undefined,i={};function j(m,n){h=m;i=n}function k(m,n){__p&&__p();if(m!==h)return;for(var o in n){if(!Object.prototype.hasOwnProperty.call(n,o))continue;var p=n[o].action,q=i[o].action;if(q===undefined)i[o]=n[o];else i[o]=Math.max(q,p)===q?i[o]:n[o]}}function l(m,n,o){__p&&__p();if(m!==h)return{};var p={};for(var q in i){if(!Object.prototype.hasOwnProperty.call(i,q))continue;else if(o.indexOf(q)!==-1)continue;else if(i[q].action<n)continue;p[q]=i[q].action}return p}f.exports={init:j,update:k,getSeenBy:l}}),null);
__d("MMessagesReplyComposer",["MMultiPhotoUploaderAttachmentState","CSS","ChannelEventType","CurrentUser","DOM","fbt","MMessagesConfig","MRequest","Stratcom","SubscriptionsHandler","cx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();var s="m-messaging-error-message",t="m-messaging-error-resend-btn",u=1e3;function v(w,x,y,z,A){"use strict";__p&&__p();this.form=w;this.textbox=x;this.sendButton=y;this.likeButton=z;this.userID=k.getID();this.threadID=A;this.state={isFocused:false,isTyping:false,hasPhotos:false};this.photosState=h.getDefaultState();this.prevSendRequest=null;this.pageListeners=new q();this.pageListeners.addSubscriptions(l.listen(this.textbox,"focus",null,this.$MMessagesReplyComposer1.bind(this)),l.listen(this.textbox,"blur",null,this.$MMessagesReplyComposer2.bind(this)),l.listen(this.textbox,["keyup","keydown","change","input"],null,this.$MMessagesReplyComposer3.bind(this)),l.listen(this.sendButton,"click",null,this.$MMessagesReplyComposer4.bind(this)),l.listen(this.likeButton,"click",null,this.$MMessagesReplyComposer5.bind(this)),p.listen("click",[t],this.$MMessagesReplyComposer6.bind(this)),p.listen("MMultiPhotoUploader:attachments:change",null,this.$MMessagesReplyComposer7.bind(this)));p.listen("m:page:unload",null,function(){this.pageListeners.release();p.removeCurrentListener()}.bind(this));this.$MMessagesReplyComposer8();this.$MMessagesReplyComposer9();i.removeClass(this.form,"_3ci_")}v.prototype.$MMessagesReplyComposer7=function(event){"use strict";this.photosState=event.getData();this.$MMessagesReplyComposer10("hasPhotos",this.photosState[h.UPLOADED]>0||this.photosState[h.SENDING]>0);this.$MMessagesReplyComposer9()};v.prototype.$MMessagesReplyComposer1=function(){"use strict";this.$MMessagesReplyComposer10("isFocused",true)};v.prototype.$MMessagesReplyComposer2=function(){"use strict";this.$MMessagesReplyComposer10("isFocused",false)};v.prototype.$MMessagesReplyComposer3=function(){"use strict";this.$MMessagesReplyComposer10("isTyping",this.textbox.value!=="");this.$MMessagesReplyComposer9()};v.prototype.$MMessagesReplyComposer9=function(){"use strict";var w=this.photosState[h.SENDING]===0&&(!/^\s*$/.test(this.textbox.value)||this.photosState[h.UPLOADED]>0);if(!w)this.sendButton.setAttribute("disabled",true);else this.sendButton.removeAttribute("disabled")};v.prototype.$MMessagesReplyComposer11=function(){"use strict";this.likeButton.setAttribute("disabled",true);setTimeout(function(){this.likeButton.removeAttribute("disabled")}.bind(this),u)};v.prototype.$MMessagesReplyComposer10=function(w,x){"use strict";this.state[w]=x;this.$MMessagesReplyComposer8()};v.prototype.$MMessagesReplyComposer8=function(){"use strict";i.conditionClass(this.form,"_3ciz",this.state.isFocused||this.state.isTyping);i.conditionClass(this.form,"_3cj0",this.state.hasPhotos)};v.prototype.$MMessagesReplyComposer6=function(){"use strict";this.sendRequest(this.prevSendRequest.url,this.prevSendRequest.data);l.hide(l.find(document,"div",s))};v.prototype.$MMessagesReplyComposer5=function(event){"use strict";this.$MMessagesReplyComposer12(event,true)};v.prototype.$MMessagesReplyComposer4=function(event){"use strict";this.$MMessagesReplyComposer12(event,false)};v.prototype.$MMessagesReplyComposer12=function(event,w){"use strict";__p&&__p();var x=this.form,y=l.convertFormToDictionary(x),z=x.action;x.reset();this.$MMessagesReplyComposer3();if(event)event.prevent();if(w)y.sticker_id=369239263222822;this.sendRequest(z,y);this.$MMessagesReplyComposer11()};v.prototype.sendRequest=function(w,x){"use strict";var y={start:function A(B){l.hide(l.find(document,"div",s))},process:function A(B){},error:function A(B){l.show(l.find(document,"div",s))},fail:function A(B){y.error(B)},postprocess:function A(B){p.invoke("m:ajax:complete")}};this.prevSendRequest={data:x,url:w};var z=this.$MMessagesReplyComposer13(x,w,y);z.send()};v.prototype.$MMessagesReplyComposer13=function(w,x,y){"use strict";__p&&__p();w.action_time=Date.now();var z=l.find(document,"*","m-messaging-composer-container"),A="async_composer",B=new o(x);B.addData(w);B.setMethod("POST");if(n.msgrRegion)B.setRequestHeader("X-MSGR-Region",n.msgrRegion);var C=A+"_saving",D=function D(F){i.conditionClass(z,A,!F);i.conditionClass(z,C,F)};B.listen("start",D.bind(null,true));B.listen("finally",D.bind(null,false));for(var E in y)B.listen(E,y[E]);return B};v.handleSendError=function(){"use strict";l.show(l.find(document,"div",s))};v.handleRecipientUnavailableError=function(){"use strict";alert(m._("This person isn't available at the moment."))};f.exports=v}),null);
__d("MHeaderSelect",["Stratcom","MViewport"],(function a(b,c,d,e,f,g,h,i){h.listen("focus","header-select",i.scrollToHeader)}),null);
__d("MSelectLink",["setTimeoutAcrossTransitions","MLegacyDataStore","Stratcom","MJSEnvironment","MPageController","MRequest"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n=k.IS_APPLE_WEBKIT_IOS&&parseInt(k.OS_VERSION,10)>=6?"blur":"change";j.listen(n,"select-link",function(o){var p=o.getNode("tag:select"),q=i.get(o.getNode("select-link")),r=q.method==="POST"?"POST":"GET";h(function(){var s=p.options[p.selectedIndex].getAttribute("value"),t=p.options[p.selectedIndex].getAttribute("title");if(t==="mrequest"){var u=new m(s);u.setMethod(r).send()}else s&&l.load(s,{replace:true,method:r})},0)})}),null);