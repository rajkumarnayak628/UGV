if (self.CavalryLogger) { CavalryLogger.start_js(["NzZll"]); }

__d("MFirefoxAppDetect",[],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){__p&&__p();if(!navigator.mozApps){j();return}if(window.locationbar&&!window.locationbar.visible){i();return}if(navigator.mozApps.getSelf){var k=navigator.mozApps.getSelf();k.onsuccess=function(){k.result?i():j()};k.onerror=j}else j()}g.isFirefoxApp=h}),null);
__d("MPageHeaderLeft",["$","DOM","MFirefoxAppDetect"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k={};function l(n){__p&&__p();if(!k.back_button){var o=h("page");k.back_button=i.find(o,"a","back-button");k.menu_button=i.find(o,"a","menu-link")}if(n.show_back_button){i.hide(k.menu_button);i.show(k.back_button)}else{i.hide(k.back_button);i.show(k.menu_button)}}var m=function m(n){__p&&__p();var o=window.navigator;if(o.standalone||k.isMozApp)l(n);else if(k.isMozApp===undefined){k.lastConfig=n;j.isFirefoxApp(function p(){k.isMozApp=true;if(n===k.lastConfig){m(n);delete k.lastConfig}},function p(){k.isMozApp=false})}};g.main=m}),null);
__d("TypeaheadNormalizer",[],(function a(b,c,d,e,f,g){var h={normalize:function i(j){return(""+j).toLocaleLowerCase().replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g,"").replace(/ +/g," ").replace(/^\s*|\s*$/g,"")}};f.exports=h}),null);
__d("TypeaheadInternationalNormalizer",["TypeaheadNormalizer"],(function a(b,c,d,e,f,g,h){var i={normalize:function j(k){var l=i._charmap;return h.normalize(k).replace(/[\u00e0-\u0450]/g,function(m){return m in l?l[m]:m})},_charmap:{"\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xe6":"ae","\xe7":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0153":"oe","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0437":"z","\u0438":"i","\u0439":"j","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u044b":"y","\u044d":"e","\u044e":"u","\u044f":"ya"}};f.exports=i}),null);
__d("TypeaheadSource",["DOM","TypeaheadNormalizer","createDeprecatedProperties","eventsMixinDeprecated","ex"],(function a(b,c,d,e,f,g,h,i,j,k,l){__p&&__p();function m(n){"use strict";n=n||{};this.disableLongerQueryCacheHit=n.disableLongerQueryCacheHit;this._raw={};this._lookup={};this._firstSeenOnValue={};this.setNormalizer(i.normalize);this._excludeIDs={}}m.prototype.bindToTypeahead=function(n){"use strict";this._changeListener=n.listen("change",this.didChange.bind(this));this._startListener=n.listen("start",this.didStart.bind(this));this._clearListener=n.listen("clear",this.didClear.bind(this))};m.prototype.unbindFromTypeahead=function(){"use strict";this._changeListener.remove();this._startListener.remove();this._clearListener.remove();this._clearListener=null};m.prototype.didChange=function(n){"use strict";return};m.prototype.didStart=function(){"use strict";return};m.prototype.didClear=function(){"use strict";return};m.prototype.clearCache=function(){"use strict";this._raw={};this._lookup={}};m.prototype.addExcludeID=function(n){"use strict";if(n)this._excludeIDs[n]=true};m.prototype.removeExcludeID=function(n){"use strict";if(n)delete this._excludeIDs[n]};m.prototype.addResult=function(n,o){"use strict";__p&&__p();n=(this.getTransformer()||this._defaultTransformer)(n);if(n.id in this._raw)return;this._raw[n.id]=n;this._firstSeenOnValue[n.id]=this._firstSeenOnValue[n.id]||o;var p=this.tokenize(n.tokenizable||n.name);for(var q=0;q<p.length;++q){this._lookup[p[q]]=this._lookup[p[q]]||[];if(Object.prototype.toString.call(this._lookup[p[q]])!=="[object Array]")throw new Error(l("Lookup entry was not an array. key: %s. value: %s",p[q],this._lookup[p[q]]));this._lookup[p[q]].push(n.id)}};m.prototype.waitForResults=function(){"use strict";this.invoke("waiting");return this};m.prototype.getResult=function(n){"use strict";return this._raw[n]};m.prototype.emptyResults=function(){"use strict";return[]};m.prototype.getMatchedResults=function(n){"use strict";__p&&__p();var o=[];if(n==="")o=this.emptyResults();else{var p=n,q={},r={},s={},t={},u=this.getQueryExtractor();if(u)n=u(n);var v=this.tokenize(n),w=v[v.length-1];v.sort(function(F,G){return G.length-F.length});for(var x=0;x<v.length;++x){if(v[x]in t){v.splice(x--,1);continue}t[v[x]]=true;var y=v[x];for(var z in this._lookup){var A=this.checkFragmentMatches(z,y,p,w);if(A){if(!(z in s))s[z]=true;else continue;var B=this._lookup[z];for(var C=0;C<B.length;++C){var D=B[C];if(!r[D])r[D]={};if(!(y in r[D])){r[D][y]=true;q[D]=(q[D]||0)+1}}}}}for(var E in q)if(q[E]==v.length&&!this._excludeIDs[E]&&(!this.disableLongerQueryCacheHit||!this._firstSeenOnValue[E]||this._firstSeenOnValue[E].length<=n.length))o.push(E)}this.sortHits(n,o);return this.renderNodes(n,o)};m.prototype.checkFragmentMatches=function(n,o,p,q){"use strict";return n.substr(0,o.length)===o};m.prototype.matchResults=function(n){"use strict";var o=this.getMatchedResults(n);this.invoke("resultsready",o);this.invoke("complete")};m.prototype.sortHits=function(n,o){"use strict";__p&&__p();var p=[],q;for(q=0;q<o.length;q++)p.push(this._raw[o[q]]);var r=function r(t,u){var v=t.sort||t.name,w=u.sort||u.name;return v.localeCompare(w)},s=this.getSortHandler()||function(n,t,u){t.sort(u)};s.call(this,n,p,r);o.splice(0,o.length);for(q=0;q<p.length;q++)o.push(p[q].id)};m.prototype.renderNodes=function(n,o){"use strict";__p&&__p();var p=Math.min(this.getMaximumResultCount(),o.length),q=[];for(var r=0;r<p;r++)if(o[r]in this._raw){var s=this._raw[o[r]];if(!this.clientRendered)s=this.createNode(s);q.push(s)}return q};m.prototype.createNode=function(n){"use strict";return h.create("a",{sigil:"typeahead-result",href:n.uri,name:n.name,rel:n.id,className:"jx-result"},n.display)};m.prototype.normalize=function(n){"use strict";return this.getNormalizer()(n)};m.prototype.tokenize=function(n){"use strict";n=this.normalize(n);if(!n.length)return[];return n.split(/\s/g)};m.prototype._defaultTransformer=function(n){"use strict";return{name:n[0],display:n[0],uri:n[1],id:n[2]}};k(m,["waiting","resultsready","complete","after_complete","initial_render","initial_results_ready","req_dispatch","req_sent","req_recv","unlock_render"]);j(m,{normalizer:null,queryExtractor:null,transformer:null,maximumResultCount:5,sortHandler:null});Object.assign(m.prototype,{_raw:null,_lookup:null,_firstOnValue:null,_excludeIDs:null,_changeListener:null,_startListener:null,_clearListener:null,clientRendered:false});f.exports=m}),null);
__d("TypeaheadOnDemandSource",["setTimeoutAcrossTransitions","TypeaheadSource","createDeprecatedProperties"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(n,o){"use strict";l.constructor.call(this,o);this.uri=n;this.haveData={"":true}}m.prototype.didChange=function(n){"use strict";this.lastChange=Date.now();n=this.normalize(n);if(this.haveData[n])this.matchResults(n);else{this.waitForResults();h(this.sendRequest.bind(this,this.lastChange,n),this.getQueryDelay())}};m.prototype.sendRequest=function(){"use strict";throw new Error("Use MTypeaheadOnDemandSource!")};m.prototype.ondata=function(n,o,p){"use strict";if(p)for(var q=0;q<p.length;q++)this.addResult(p[q],o);this.haveData[o]=true;if(n!=this.lastChange)return;this.matchResults(o)};m.prototype.clearCache=function(){"use strict";l.clearCache.call(this);this.haveData={"":true}};j(m,{queryDelay:125,auxiliaryData:{}});Object.assign(m.prototype,{uri:null,lastChange:null,haveData:null});f.exports=m}),null);
__d("TypeaheadCompositeSource",["TypeaheadSource","TypeaheadOnDemandSource","isElementNode"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(n,o){"use strict";__p&&__p();l.constructor.call(this);o=o||{};this.sources=n;this.cacheSourceCount=n.length;this.isWorkUser=o.isWorkUser;this.delayRender=false;this.allowEmptyMergeKey=true;this.shouldMergeResults=true;for(var p=0;p<this.sources.length;++p){var q=this.sources[p];q.listen("waiting",this.childWaiting.bind(this));q.listen("resultsready",this.childResultsReady.bind(this));q.listen("complete",this.childComplete.bind(this));if(q instanceof i){q.listen("req_dispatch",this.childRequestDispatch.bind(this));q.listen("req_sent",this.childRequestSent.bind(this));q.listen("req_recv",this.childRequestReceived.bind(this));q.listen("unlock_render",this.startRender.bind(this));if(q.enableImmediateReturnOfCachedResults===false)--this.cacheSourceCount;if(q.enableEagerSendRequest)this.delayRender=true;this.listen("initial_results_ready",q.setCacheResultsLength.bind(q))}}}m.prototype.didChange=function(n){"use strict";this.results=[];this.completeCount=0;this.readyCount=0;this.lockRender=true;for(var o=0;o<this.sources.length;++o)this.sources[o].didChange(n)};m.prototype.didStart=function(){"use strict";for(var n=0;n<this.sources.length;++n)this.sources[n].didStart()};m.prototype.didClear=function(){"use strict";this.results=[]};m.prototype.addExcludeID=function(n){"use strict";for(var o=0;o<this.sources.length;++o)this.sources[o].addExcludeID(n)};m.prototype.removeExcludeID=function(n){"use strict";for(var o=0;o<this.sources.length;++o)this.sources[o].removeExcludeID(n)};m.prototype.childWaiting=function(){"use strict";if(!this.results||!this.results.length)this.invoke("waiting")};m.prototype.childResultsReady=function(n){"use strict";__p&&__p();if(this.shouldMergeResults)this.results=this.mergeResults(this.results||[],n);else this.results=n;++this.readyCount;if(this.readyCount==this.cacheSourceCount){if(this.results!==null)this.results.forEach(function(o){o.isFromCache=true});this.invoke("initial_results_ready",this.countValidResults(this.results))}if(!this.delayRender||!this.lockRender){this.invoke("resultsready",this.results);if(this.readyCount==this.cacheSourceCount)this.invoke("initial_render")}};m.prototype.childComplete=function(){"use strict";this.completeCount++;if(this.completeCount==this.sources.length){this.invoke("complete");this.invoke("after_complete")}};m.prototype.childRequestDispatch=function(n){"use strict";this.invoke("req_dispatch",n)};m.prototype.childRequestSent=function(){"use strict";this.invoke("req_sent")};m.prototype.childRequestReceived=function(n){"use strict";this.invoke("req_recv",n)};m.prototype.startRender=function(){"use strict";this.lockRender=false;this.invoke("resultsready",this.results);this.invoke("initial_render")};m.prototype.countValidResults=function(n){"use strict";var o=0;n.forEach(function(p){var q=j(p)?p.getAttribute(this.mergeKey):p[this.mergeKey];if(q!=null)++o},this);return o};m.prototype.getResult=function(n){"use strict";var o;for(var p=0;p<this.sources.length;++p){o=this.sources[p].getResult(n);if(o!==undefined)break}return o};m.prototype.disableEmptyMergeKey=function(){"use strict";this.allowEmptyMergeKey=false};m.prototype.mergeResults=function(n,o){"use strict";__p&&__p();var p=[].concat(n);if(o.length===0)return p;var q={},r;for(r=0;r<n.length;++r){var s=n[r],t=j(s)?s.getAttribute(this.mergeKey):s[this.mergeKey];q[t]=true}for(r=0;r<o.length;++r){var u=o[r],v=j(u)?u.getAttribute(this.mergeKey):u[this.mergeKey];if((this.allowEmptyMergeKey||v!=null)&&!(v in q))p.push(u)}return p};m.prototype.setShouldMergeResults=function(n){"use strict";this.shouldMergeResults=n};Object.assign(m.prototype,{sources:null,results:null,completeCount:0,mergeKey:"rel",isWorkUser:false});f.exports=m}),null);
__d("TypeaheadPreloadedSource",["TypeaheadSource"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,h);j=i&&i.prototype;function k(l){"use strict";j.constructor.call(this);this.uri=l}k.prototype.didChange=function(l){"use strict";if(this.ready)this.matchResults(l);else{this.lastValue=l;this.waitForResults()}};k.prototype.didStart=function(){"use strict";throw new Error("Use MTypeaheadPreloadedSource!")};k.prototype.ondata=function(l){"use strict";for(var m=0;m<l.length;++m)this.addResult(l[m]);if(this.lastValue!==null)this.matchResults(this.lastValue);this.ready=true};Object.assign(k.prototype,{ready:false,uri:null,lastValue:null});f.exports=k}),null);
__d("MDynaTemplate",["HTML","ex"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j={_otag:"[[",_regexOtag:"\\[\\[",_regexCtag:"\\]\\]",_regexTag:0,_regexNewTag:0,_templates:{},_alias:{},_contains:function k(l,m){return m.indexOf(j._otag+l)!=-1},_escapeChar:function k(l){switch(l){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return l}},_escape:function k(l){l=l===null?"":""+l;return l.replace(/&(?!\w+;)|[\"\'<>]/g,j._escapeChar)},registerTemplates:function k(l){for(var m in l){var n=l[m];j._alias[n[0]]=n[1];j._templates[m]=n[1]}},renderToHtml:function k(l,m){__p&&__p();if(l.charAt(0)=="@")return j.renderToHtml(j._alias[l.substring(1)],m);if(j._contains("#",l)||j._contains("^",l))l=l.replace(j._regexTag,function(n,o,p,q){__p&&__p();var r=m[p];r=r&&r.__html!==undefined?r.__html:r;if(o=="^")if(!r||Array.isArray(r)&&r.length===0)return j.renderToHtml(q,m);else return"";else if(o=="#"){if(Array.isArray(r)){var s=[];for(var t=0;t<r.length;t++)s.push(j.renderToHtml(q,r[t]));return s.join("")}else if(r&&typeof r=="object")return j.renderToHtml(q,r);else if(!(typeof r=="function"))if(r)return j.renderToHtml(q,m);return""}});if(!j._contains("",l))return l;return l.replace(j._regexNewTag,function(n,o,p){__p&&__p();p=p.replace(/^\s*|\s*$/g,"");var q=m[p];if(!q||Array.isArray(q)&&q.length===0)return"";switch(o){case">":if(q[0].charAt(0)=="@")return j.renderToHtml(q[0],q[1]);else if(!(q[0]in j._templates))return"";return j.renderToHtml(j._templates[q[0]],q[1]);case"%":break;default:if(window.HTML&&q instanceof h)return q.toString();return q.__html!==undefined?q.__html:j._escape(q)}})}};(function(){j._regexTag=new RegExp(j._regexOtag+"(\\^|\\#)\\s*(.+)\\s*"+j._regexCtag+"\n*([\\s\\S]+?)"+j._regexOtag+"\\/\\s*\\2\\s*"+j._regexCtag+"\\s*","mg");j._regexNewTag=new RegExp(j._regexOtag+"(>|\\[|%)?([^\\/#\\^]+?)\\1?"+j._regexCtag+"+","g")})();f.exports=j}),null);
__d("MSearchMessages",["DOM","Stratcom"],(function a(b,c,d,e,f,g,h,i){function j(k){var l=h.listen(k,"submit",null,function(m){m.kill();k.getElementsByTagName("button")[0].focus()});i.listen("m:page:unload",null,function(){l.remove();i.removeCurrentListener()})}f.exports={init:j}}),null);
__d("MInputFocus",["DOM","MViewport","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j){var k={scrollTo:function l(m,n){j(function(){h.hide(m);i.scrollTo(0,n);h.show(m);m.setSelectionRange(m.selectionEnd,m.selectionEnd)},0)}};f.exports=k}),null);
__d("prefetchImage",[],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){__p&&__p();var k=true,l=new Image();l.onload=function(){k=false;j&&j()};l.src=i;return{cancel:function m(){if(!k)return;k=false;l.onload=null;l.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}}}f.exports=h}),null);
__d("MPhotoStage",["setTimeoutAcrossTransitions","CSS","cx","DOM","Stratcom","Vector","MLegacyDataStore","MURI","MRequest","MViewport","MInputFocus","MJSEnvironment","prefetchImage"],(function a(b,c,aa,ba,ca,d,e,f,da,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=false,r="photo-stage",s="photo-image",t="facebox",u="new-tag-placeholder",v="photos-input-tag-notice",w="photos-input-tag",x="photo-tag-loading",y="popup-nub",z="tokenizer-input",A="transfer-focus-container",B=2e3,C=200,D=null,E=null,F=null,G=null;function H(P,Q,R){var S=0,T=m.getUseableWidth();if(R>T)S=R-T;else if(Q<0)S=Q;if(S===0)return P;return new i(P.x-S,P.y)}function I(P){if(!P)return;f.conditionClass(P,"_57-n",!!F);if(F){clearTimeout(F);F=null}else F=e(function(){I(P)},B)}function J(){D=null;while(G.length)G.pop().remove();q=false;if(F){clearTimeout(F);F=null}}function K(P){var Q=i.getPos(P),R=i.getDim(P),S=i.getPos(D),T=new i(Q.x+R.x/2,Q.y+R.x-S.y),U=g.find(D,"*",x);T.setPos(U);g.show(U)}function L(P,Q,R){__p&&__p();var S=new k(P.write_tag_uri);S.addQueryData("id",P.owner_id);S.addQueryData("facebox_id",Q.facebox_id);S.addQueryData("replace_id",u);S.addQueryData("sd_source",P.source);S.addQueryData("sd_set",P.set);var T={};T["ids["+R+"]"]=R;T["x["+R+"]"]=Q.facebox_center.x;T["y["+R+"]"]=Q.facebox_center.y;var U=new l(S.normalize().toString()).addData(T);return U}function M(P,Q){__p&&__p();E=P;var R=g.find(D,"*",w),S=g.find(D,"*",v),T=i.getPos(D),U=i.getPos(P),V=i.getDim(P),W=new i(U.x+V.x/2,U.y+V.y-T.y),X=H(W,W.x-C/2,W.x+C/2),Y=g.find(R,"*",y);Y.style.left=W.x-X.x+"px";var Z=j.get(E);if(Z.suggestions)Q.tokenizer.updateSuggestionsIds(Z.suggestions);X.setPos(R);g.show(R);g.show(S);var $=g.find(R,"*",z);$.focus();n.scrollTo($,U.y);if(F){clearTimeout(F);F=null}}function N(P){__p&&__p();var Q=g.find(D,"*",w),R=g.find(D,"*",v);if(E){var S=j.get(E),T=j.get(D),U=L(T,S,P);K(E);U.listen("finally",function(){var V=g.find(D,"*",x);g.hide(V);I(D)});U.send();g.hide(E);g.hide(Q);g.hide(R);g.find(Q,"*",z).blur();E=null}F=e(function(){I(D)},B)}var O=function O(P,Q){__p&&__p();if(q)return;D=P;q=true;var R="touchend";if(o.IS_ANDROID)R="click";if(Q&&Q.use_faceboxes)G=[h.listen(R,r,function(event){if(E){var T=g.find(D,"*",w),U=g.find(D,"*",v);g.find(T,"*",z).blur();g.hide(T);g.hide(U);E=null;event.kill()}else I(event.getNode(r))}),h.listen(R,t,function(event){var T=g.find(D,"*",A),U=event.getNode(t);M(U,T);event.kill()}),h.listen(R,A,function(event){var T=event.getNode(A),U=g.find(T,"*",z);U.focus();if(E)n.scrollTo(U,i.getPos(E).y);event.kill()}),h.listen("Tokenizer-addedtoken",null,function(event){N(event.getData().rel)})];else G=[h.listen("touchend",r,function(event){I(event.getNode(r))})];G.push(h.listen("m:page:unload",null,J));var S=g.scry(D,"*",s);if(S.length>0&&j.get(S[0]).imgsrc)p(j.get(S[0]).imgsrc,function(){return I(D)});else I(D)};d.main=O}),null);
__d("MTouchAfro",["CSS","MLegacyDataStore","DOM","MModalDialog","MRequest","MXUIDiv.react","Parent","React","ReactDOM","Set","Stratcom","URI","$","csx","cx","fbt","ge","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){__p&&__p();var z=null,A=null,B=null,C=null,D={renderNFXReport:function E(F,G){y(function(){h.hide(F);D.openDialog(G)},500)},initUndoHide:function E(){if(z!==null)return;z=r.listen("click","afro-undo-hide",function(F){var G=F.getNode("undo-content"),H=i.get(G).storyDomID;j.hide(G);j.show(t(H))});r.listen("m:page:unload",null,function(){z.remove();r.removeCurrentListener()})},hideOriginalContent:function E(F){j.hide(t(F))},initDoneListener:function E(F,G){__p&&__p();if(A!==null)return;A=r.listen("click","nfx-dialog-done",function(H){__p&&__p();if(F){var I=t(F);if(I){var J=i.get(I).enhancedAfro;if(J)h.addClass(I,"_2gft")}p.render(o.createElement(m,{padding:"large",fontshade:"medium",fontweight:"bold"},w._("Thanks for letting us know.")),t(F));if(G){var K=x(G);if(K){j.remove(K);h.removeClass(n.bySelector(t(F),"._2b01"),"_2b01")}}}k.close()});r.listen("m:page:unload",null,function(){A.remove();r.removeCurrentListener()})},showConfirmationPopup:function E(F,G){var H=confirm(F);if(H){var I=new l(G);I.send()}},showInlineConfirmation:function E(F,G){var H=t(F);j.hide(H);j.insertAfter(H,G);var I=j.scry(G,"a","touchable");if(I[0])I[0].focus()},redirect:function E(F,G){if(!G)window.location=F;else{var H=new l(F);H.send()}},redirectOnClick:function E(F,G){r.listen("click",G,function(H){window.location=F})},openDialog:function E(F){k.open(F)},openDialogOnClick:function E(F,G){var H=r.listen("click",G,function(I){k.open(F)});r.listen("m:page:unload",null,function(){H.remove();r.removeCurrentListener()})},initActionsTakenStore:function E(){C=false;if(B!==null)return;B=new q();var F=r.listen("m-nfx-action-taken",null,function(G){return B.add(G.getData())});r.listen("m:page:unload",null,function(){F.remove();r.removeCurrentListener()})},clearActionsTakenStore:function E(){B=new q()},invokeActionTaken:function E(F){r.invoke("m-nfx-action-taken",null,F)},checkActionAgainstStore:function E(F){var G=i.get(F),H=false;B.forEach(function(I){if(I.action===G.action&&I.label===G.label)H=true});return H},addCancelButtonListener:function E(){var F=t("modalDialog");j.listen(F,"click","dialog-cancel-button-alt",function(G){G.kill();k.close();return})},dialogLoadConfirmationScreenOnClick:function E(F){j.listen(F,"click",null,function(G){G.kill();k.close();return})},logReportAdLinkClick:function E(F,G){var H=j.listen(F,"click",null,function(){new l(G).send()});r.listen("m:page:unload",null,function(){H.remove();r.removeCurrentListener()})},setupWildeDoneButton:function E(){window.addEventListener("fbActionButtonClick",function(){return window.__fbNative.close()})}};f.exports=D}),null);
__d("MTouchTransferFocus",["CSS","DOM","Stratcom","MViewport","MLegacyDataStore"],(function a(b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m="transfer-focus-container",n="focus-provider",o="focus-receiver",p="focused";j.listen(["click","touchend"],[m,n],function(q){__p&&__p();var r=q.getNode(n),s=l.get(r);if(s.onclickIsSet)return;var t=q.getNode(m);r.onclick=function(){__p&&__p();h.conditionClass(t,p,true);var u=i.scry(t,"input",o)[0];if(u){u.focus();var v=l.get(t);if(v.hideaddressbar)setTimeout(function(){if(k.getScrollTop()<1)k.scrollTo(0,1)},0)}};s.onclickIsSet=true});j.listen("blur",[m,o],function(q){h.conditionClass(q.getNode(m),p,false)})}),null);
__d("MImagePreloader",[],(function a(b,c,d,e,f,g){function h(i){for(var j=0;j<i.length;j++){var k=new Image();k.src=i[j]}}g.init=h}),null);
__d("MQuickSearch",["$","DOM","HTML","MRequest","MRequestTypes","MViewport","Stratcom","Vector","destroyOnUnload","eventsMixinDeprecated","setIntervalAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();var s=[];function t(u,v){"use strict";__p&&__p();this._uri=u.uri;this._args=u.args||{};var w=h(u.nodeID);this._input=i.find(w,"input","quicksearch-input");this._button=i.scry(w,"*","quicksearch-button")[0];this._container=h(u.containerID);this._resultsBoxID=u.resultsBoxID;this._resultsBox=h(this._resultsBoxID);this._shouldScroll=u.shouldScroll;if(u.throbber)this._throbber=new j(u.throbber);this._request=null;this._searchLogger=v||null;this._listeners=[i.listen(this._input,"focus",null,this._focus.bind(this)),i.listen(this._input,"blur",null,this._cleanup.bind(this)),i.listen(this._input,"keydown",null,this._handleKeyDown.bind(this)),i.listen(this._input,"keyup",null,this._handleKeyUp.bind(this))];if(this._button)this._listeners.push(i.listen(this._button,"click",null,this._click.bind(this)));if(this._args.bootstrap)this.search(this._input.value);s.push(this);p(function(){n.removeCurrentListener();s.forEach(function(x){return x._destroy()});s=[]})}t.prototype._handleKeyDown=function(event){"use strict";this._scrollToContainer();this._previousText=this._input.value};t.prototype._handleKeyUp=function(event){"use strict";if(event.getSpecialKey()==="delete"&&(this._args.bootstrap||this._args.showInitialResultsOnClear)){var u=this._input.value;if(u.trim()===""&&u!==this._previousText)this.reset()}};t.prototype._scrollToContainer=function(){"use strict";if(this._shouldScroll)m.scrollTo(o.getPos(this._container))};t.prototype._update=function(){"use strict";__p&&__p();var u=this._input.value;if(this._previousText==u)return;this._previousText=u;if(/^\s*$/.test(u)&&!this._args.bootstrap){this._resetContent();this._abortRequest();return}this._saveInitialNodes();this.search(u)};t.prototype.search=function(u){"use strict";__p&&__p();if(this.invoke("search",u).getPrevented())return;this._throbber&&i.setContent(this._resultsBox,this._throbber);this.addQueryParameters({q:u||""});this._abortRequest();if(this._searchLogger)this._searchLogger.onSearch(this._args);this._request=new k(this._uri);this._request.setType(l.DEPENDENT);this._request.listen("done",function(v){this._resultsBox=h(this._resultsBoxID);if(this._searchLogger)this._searchLogger.onResults(this._request,this._resultsBox);if(this._needsDefaultNodes){this._saveInitialNodes();this._needsDefaultNodes=false}this._request=null}.bind(this));this._request.setMethod("GET");this._request.setData(this._args).send()};t.prototype._abortRequest=function(){"use strict";this._request&&this._request.abort()&&(this._request=null)};t.prototype._resetContent=function(){"use strict";this._resultsBox=h(this._resultsBoxID);i.setContent(this._resultsBox,this._initialNodes)};t.prototype.resetToThrobber=function(){"use strict";this._resultsBox=h(this._resultsBoxID);if(this._throbber&&this._resultsBox)i.setContent(this._resultsBox,this._throbber)};t.prototype.addQueryParameters=function(u){"use strict";Object.assign(this._args,u)};t.prototype.maybeAddQueryParameters=function(u){"use strict";for(var v in u)if(!(v in this._args))this._args[v]=u[v]};t.prototype.clear=function(){"use strict";this._input.value="";this._initialNodes=null};t.prototype._focus=function(event){"use strict";__p&&__p();this._focused=true;if(this._button){this._button.setAttribute("type","button");this._button.disabled=false}this._scrollToContainer();this._previousText=this._input.value;clearInterval(this._interval);this._interval=r(this._update.bind(this),300)};t.prototype._click=function(event){"use strict";event.prevent();this.reset()};t.prototype._cleanup=function(){"use strict";if(this._searchLogger)this._searchLogger.onCleanup();this._focused=false;if(!this._input.value&&this._button){this._button.setAttribute("type","submit");this._button.disabled=true}clearInterval(this._interval)};t.prototype.reset=function(){"use strict";__p&&__p();this._abortRequest();this._cleanup();this._saveInitialNodes();this._resetContent();this._input.value="";this._input.blur();if(this._button){this._button.setAttribute("type","submit");this._button.disabled=true}if(this._args.showInitialResultsOnClear)this.search("");this._scrollToContainer()};t.prototype._saveInitialNodes=function(){"use strict";if(!this._initialNodes)this._initialNodes=Array.from(this._resultsBox.childNodes)};t.prototype._destroy=function(){"use strict";this._listeners.forEach(function(u){return u&&u.remove()});this._listeners.length=0};t.prototype.setNeedsDefaultNodes=function(){"use strict";this._needsDefaultNodes=true};t.getInstances=function(){"use strict";return s};q(t,["search"]);Object.assign(t.prototype,{_uri:null,_args:null,_input:null,_button:null,_container:null,_resultsBox:null,_shouldScroll:true,_throbber:null,_focused:false,_initialNodes:null,_previousText:null,_interval:null,_needsDefaultNodes:false,_searchLogger:null});f.exports=t}),null);
__d("MTypeaheadCache",["MBootstrapCacheMaxCacheTime","MCache","URI"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k="1",l=12096e5;function m(q){__p&&__p();var r=i.getItem(q);if(!r||r.cacheVersion!==k){r={cacheVersion:k,cachedKeys:{}};i.setItem(q,r)}var s=r.cachedKeys,t=false,u=h.maxCacheTimeByKey[q],v=u!=null?u:l,w=Date.now()-v;for(var x in s)if(s[x].time<w){t=true;delete s[x]}if(t)i.setItem(q,r);return r}function n(q){return"typeahead_"+q}function o(q){var r=new j(q),s=r.getQueryData(),t=s.cacheBust;if(!t)r.addQueryData("noBust","");r.removeQueryData("cacheBust");var u=r.toString();return{cacheKey:u,busterToken:t}}var p={get:function q(r,s){var t=o(s),u=t.cacheKey,v=t.busterToken,w=m(n(r)).cachedKeys[u];if(w&&w.cacheBusterToken===v)return w.data;return null},set:function q(r,s,t){var u=n(r),v=m(u),w=o(s),x=w.cacheKey,y=w.busterToken;v.cachedKeys[x]={cacheBusterToken:y,time:Date.now(),data:t};i.setItem(u,v)}};f.exports=p}),null);
__d("MTypeaheadCachableSource",["MRequest","MTypeaheadCache","TypeaheadPreloadedSource","createDeprecatedProperties","eventsMixinDeprecated"],(function a(b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m,n;m=babelHelpers.inherits(o,j);n=m&&m.prototype;function o(p,q){"use strict";n.constructor.call(this,p);this.sourceKey=q||null}o.prototype.didStart=function(){"use strict";__p&&__p();var p=this.ondata,q=o._bootstrapping;if(this.sourceKey){if(q[this.sourceKey]===true){o.listen("bootstrapped",function(s){s.source_key===this.sourceKey&&this.didStart()}.bind(this));return}var r=i.get(this.sourceKey,this.uri);if(r){this.invoke("rawresultsready",r);p.call(this,r);return}}if(this.uri)this.sendRequest()};o.prototype.sendRequest=function(){"use strict";__p&&__p();var p=o._bootstrapping;p[this.sourceKey]=true;var q=new h(this.uri).setMethod("GET").setIgnoreErrors(true);q.listen("done",function(r){__p&&__p();r=r!=null&&r.payload!=null?r.payload:r;if(r!=null&&Array.isArray(r.nullstate))r=r.nullstate;if(!Array.isArray(r))r=[];for(var s=0;s<r.length;++s)r[s].bootstrap=1;if(this.sourceKey)i.set(this.sourceKey,this.uri,r);this.invoke("rawresultsready",r);this.ondata.call(this,r);delete p[this.sourceKey];this.invoke("bootstrapped",{source_key:this.sourceKey})}.bind(this));q.listen("finally",function(){delete p[this.sourceKey]}.bind(this));q.listen("open",function(){var r=q.getTransport();r.withCredentials=true;if(window.FW_ENABLED&&!this.getNofwheaders()){r.setRequestHeader("FB_FW","1");if(window.FB_FW_VERSION)r.setRequestHeader("FB_FW_VERSION",window.FB_FW_VERSION);if(window.FB_FW_DEVICE)r.setRequestHeader("FB_FW_DEVICE",window.FB_FW_DEVICE)}}.bind(this));if(this.getAuxiliaryData())q.setData(this.getAuxiliaryData());q.send()};l(o,["bootstrapped","rawresultsready"]);k(o,{nofwheaders:false,showSecondaryAction:false,auxiliaryData:{}});Object.assign(o,{_bootstrapping:{}});Object.assign(o.prototype,{sourceKey:null});f.exports=o}),null);
__d("MTypeaheadHelpers",["CSS","MLegacyDataStore","DOM","HTML","MDynaTemplate","cx","fbt","uniqueID","FWLoader"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p=c("FWLoader").FW,q=43,r=65536,s={getSecondaryAction:function t(u){if(u.action=="phone")return this.getPhoneAction(u);else if(u.action=="add_friend")return this.getAddAction(u);else if(u.action=="add_contact")return this.getAddContactAction(u);else if(u.action=="message")return this.getMessageAction(u);return null},getPhoneAction:function t(u){if(!u.paths||!(u.paths.mobile||u.paths.sms))return null;var v=l.renderToHtml("@CallButtonTemplate",{call_uri:u.paths.mobile,call_style:u.paths.mobile?"":"display:none;",sms_uri:u.paths.sms,sms_style:u.paths.sms?"":"display:none;"});return new k(v)},getAddAction:function t(u){if(!u.paths||!u.paths[u.action])return null;return new k(u.paths[u.action])},getAddContactAction:function t(u){if(!u.paths||!u.paths[u.action])return null;return u.paths[u.action]},getMessageAction:function t(u){var v=l.renderToHtml("@MessageButtonTemplate",{message_uri:u.paths.message});return new k(v)},determineIconSize:function t(u,v){__p&&__p();var w=v.photoSize||q,x=v.photo,y=new Image(),z=function z(A){__p&&__p();var y=this;if(A.type==="load"){var B=document.getElementById(y.targetID);if(B){if(y.naturalWidth>w||y.naturalHeight>w){var C=window.devicePixelRatio,D=Math.round(y.naturalHeight/C),E=Math.round(y.naturalWidth/C);D=Math.min(D,w);E=Math.min(E,w);B.style.backgroundSize=E<D?E+"px auto":"auto "+D+"px"}B.style.backgroundImage="url("+y.src+")"}}y.onload=null;y.onerror=null;y.targetID=null};y.targetID=u;y.onload=z;y.onerror=z;y.src=x},getI18NTypeMap:function t(u){var v={App:n._("App"),Event:n._("Event"),Group:n._("Group"),Page:n._("Page"),page:n._("page"),Place:n._("Place"),User:n._("User")};if(v[u])return v[u];return u},createNode:function t(u,v){__p&&__p();if(u instanceof HTMLElement)return u;var w=[];if(u.photo){var x=j.create("div",{className:"profile-icon"});w.push(x);this.determineIconSize(j.uniqID(x),u)}var y=[u.display];if(u.verified)y.push(u.verified);else if(u.is_verified){var z=j.create("span",{className:"_56_f _5dzy _5dz_ _3twv badge"});y.push(z)}var A=j.create("i",{className:"img presence",sigil:"presence"},"");j.hide(A);y.push(A);var B=j.create("span",{className:"mfsl"},y);w.push(B);if(!u.photo)h.conditionClass(B,"noimage",true);var C=u.subtext;h.conditionClass(B,"name",true);if(C)w.push(j.create("span",{className:"subtext mfss fcg"},C));var D={href:u.uri,name:u.name||u.display,className:"primary touchable",sigil:"touchable typeahead-result",rel:u.id};if(u.meta)D.meta=u.meta;var E=j.create("a",D,w),F=JSON.stringify(u);if(!(F.length>r))E.setAttribute("data-extra",F);E.setAttribute("data-testid",u.id);if(u.weak_reference)E.setAttribute("weak_reference",true);if(u.renderType)E.setAttribute("renderType",u.renderType);if(window.FW_ENABLED&&p.isIOS())i.set(E,{nativeClick:true});if(u.bootstrap)i.set(E,{bootstrap:1});if(u.gender)i.set(E,{gender:u.gender});if(u.untranslatedType)i.set(E,{type:u.untranslatedType});if(u.openinnewtab)E.setAttribute("target","_blank");if(u.isNullStateSuggestion)i.set(E,{isNullStateSuggestion:u.isNullStateSuggestion});var G=[E];if(v){var H=this.getSecondaryAction(u);if(H)G.push(H)}if(u.nativethirdpartyappicon)G.push(new k(l.renderToHtml("@NativeThirdPartyAppIconTemplate")));var I="jx-result";if(u.nativethirdpartyappicon||v&&this.getSecondaryAction(u))I+=" hasSecondaryAction";if(u.action=="add_friend"&&u.addfriendtemplate)l.renderToHtml("@AddFriendLoadResourcesTemplate");var J=j.create("div",{className:I,id:o(),rel:u.id,role:"option",sigil:"jx-result"+(u.action=="add_friend"?" undoable-action":"")},G);if(u.renderType!=null)J.setAttribute("renderType",u.renderType);if(u.untranslatedType!=null)J.setAttribute("type",u.untranslatedType);if(u.category!=null)J.setAttribute("category",u.category);return J}};f.exports=s}),null);
__d("MTypeaheadOnDemandSource",["setTimeoutAcrossTransitions","MRequest","MTypeaheadHelpers","Stratcom","TypeaheadInternationalNormalizer","TypeaheadNormalizer","TypeaheadOnDemandSource","createDeprecatedProperties","throttle"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q,r;q=babelHelpers.inherits(s,n);r=q&&q.prototype;function s(t,u){"use strict";__p&&__p();r.constructor.call(this,t,u);this.previousResults=null;this.setNormalizer(l.normalize);this.setSanitizer(m.normalize);this._allowFreeformEntry=false;this._cacheResultsLength=0;this._maxResults=1e6;k.listen("m-typeahead-logger:new-session-id",null,function(v){this._sessionID=v.getData().sessionID}.bind(this))}s.prototype.setAllowFreeformEntry=function(t){"use strict";this._allowFreeformEntry=t};s.prototype.createNode=function(t){"use strict";return j.createNode(t,this.getShowSecondaryAction())};s.prototype.didChange=function(t){"use strict";__p&&__p();this.lastChange=Date.now();var u=this.getSanitizer()(t);if(this.haveData[u]){var v=this.normalize(u),w=this.getMatchedResults(v);this.invoke("resultsready",w);if(this.enableEagerSendRequest)this.invoke("unlock_render");this.invoke("complete")}else{if(this.enableImmediateReturnOfCachedResults===true){this.previousResults=this.getMatchedResults(t);this.invoke("resultsready",this.previousResults)}else this.previousResults=null;if(this._cacheResultsLength>=this._maxResults){if(this.enableEagerSendRequest)this.invoke("unlock_render");this.invoke("complete");return}if(!this.enableEagerSendRequest)this.waitForResults();this.invoke("req_dispatch",this._sessionID);if(this.throttleSendRequest)this.throttleSendRequest(this.lastChange,t);else h(this.sendRequest.bind(this,this.lastChange,t),this.getQueryDelay());if(this.enableEagerSendRequest){this.invoke("unlock_render");this.waitForResults()}}};s.prototype.setEnableImmediateReturnOfCachedResults=function(t){"use strict";this.enableImmediateReturnOfCachedResults=t};s.prototype.setEnableEagerSendRequest=function(t){"use strict";this.enableEagerSendRequest=t};s.prototype.setThrottleSendRequest=function(t){"use strict";this.throttleSendRequest=p.acrossTransitionsWithBlocking(this.sendRequest.bind(this),t)};s.prototype.setCacheResultsLength=function(t){"use strict";this._cacheResultsLength=t};s.prototype.setMaxResults=function(t){"use strict";this._maxResults=t};s.prototype.sendRequest=function(t,u){"use strict";__p&&__p();if(t!=this.lastChange)return;if(!this.uri)return;var v=new i(this.uri);v.setData(Object.assign(this.getAuxiliaryData()||{},{q:u,session_id:this._sessionID}));v.setMethod("GET");v.listen("done",function(w,x,y){this.ondata(w,x,y)}.bind(this,this.lastChange,u));v.send();this.invoke("req_sent")};s.prototype.ondata=function(t,u,v){"use strict";__p&&__p();v=v.payload||v;this.invoke("req_recv",v?v.length:0);var w=0,x=0,y={};if(this.previousResults!=null){x=this.previousResults.length;for(w=0;w<this.previousResults.length;w++){var z=this.previousResults[w];z.idx=w;this._raw[z.id]=z;this.addToLookup(z.id,u);y[z.id]=z.id}}if(v){if(v.length!==0){var A;for(A=0;A<v.length;++A)v[A].idx=A+x;for(A=0;A<v.length;A++)if(!(v[A].uid in y))this.addResult(v[A],u)}else if(this._allowFreeformEntry)this.addResult({text:u,uid:0,path:"#"},u);this.haveData[u]=true;if(t!=this.lastChange)return;this.matchResults(u)}};s.prototype.addResult=function(t,u){"use strict";__p&&__p();var v=this.addToLookup.bind(this);if(t.uid in this._raw)this._raw[t.uid].idx=t.idx;t=(this.getTransformer()||this._defaultTransformer)(t);this._firstSeenOnValue[t.id]=this._firstSeenOnValue[t.id]||u;if(!(t.id in this._raw)){this._raw[t.id]=t;v(t.id,t.name);v(t.id,u)}else{this._raw[t.id]=t;v(t.id,u)}};s.prototype.addToLookup=function(t,u){"use strict";var v=this.tokenize(u);for(var w=0;w<v.length;++w){this._lookup[v[w]]=this._lookup[v[w]]||[];this._lookup[v[w]].push(t)}};s.prototype.sortHits=function(t,u){"use strict";var v=function(w,x){var y=this._raw[w],z=isNaN(y.idx)?Number.MAX_VALUE:y.idx,A=this._raw[x],B=isNaN(A.idx)?Number.MAX_VALUE:A.idx;return z-B}.bind(this);u.sort(v)};s.prototype.renderNodes=function(t,u){"use strict";return n.prototype.renderNodes.apply(this,arguments)};s.prototype.clearCache=function(){"use strict";r.clearCache.call(this);this.previousResults=null};o(s,{sanitizer:null,transformer:function t(u){return{name:u.text,uri:u.path,id:u.uid,photo:u.photo,display:u.display||u.text,action:u.action,paths:u.paths,permissions:u.permissions,photoSize:u.photo_size,type:u.type,openinnewtab:u.openinnewtab,subtext:u.text_only_subtext||u.subtext,nativethirdpartyappicon:u.nativethirdpartyappicon,idx:u.idx,renderType:u.render_type,untranslatedType:u.untranslated_type,verified:u.verified,weak_reference:u.weak_reference,geo_location_type:u.geo_location_type,city_id:u.city_id,city_text:u.city_text,isScoped:u.is_scoped,categoryID:u.cid,tagID:u.tid,category:u.category,location:u.location,street_address:u.street_address,postal_code:u.postal_code}},showSecondaryAction:true});f.exports=s}),null);
__d("MTypeaheadTouchSource",["MTypeaheadCachableSource","MTypeaheadHelpers","TypeaheadInternationalNormalizer","createDeprecatedProperties"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;function n(o,p){"use strict";m.constructor.call(this,o,p);this.setNormalizer(j.normalize)}n.prototype.createNode=function(o){"use strict";return i.createNode(o,this.getShowSecondaryAction())};n.prototype.matchResults=function(o){"use strict";var p=this.normalize(o);h.prototype.matchResults.call(this,p)};n.prototype.ondata=function(o){"use strict";for(var p=0;p<o.length;++p)o[p].idx=p;h.prototype.ondata.apply(this,[o])};k(n,{transformer:function o(p){var q=p.openinnewtab!=null?p.openinnewtab:p.type==="App";return{name:p.text,uri:p.path,id:p.uid,photo:p.photo,photoSize:p.photo_size,gender:p.gender,display:p.display||p.text,action:p.action,paths:p.paths,permissions:p.permissions,type:p.type,openinnewtab:q,subtext:p.subtext,nativethirdpartyappicon:p.nativethirdpartyappicon,bootstrap:p.bootstrap,idx:p.idx,tokenType:p.tokenType,renderType:p.render_type,untranslatedType:p.untranslated_type,weak_reference:p.weak_reference,is_verified:p.is_verified}},sortHandler:function o(p,q,r){var s=function s(t,u){var v=isNaN(t.idx)?Number.MAX_VALUE:t.idx,w=isNaN(u.idx)?Number.MAX_VALUE:u.idx;return v-w};q.sort(s)}});f.exports=n}),null);
__d("MTypeaheadTouchSourceWithSuggestions",["setTimeoutAcrossTransitions","MTypeaheadTouchSource","createDeprecatedProperties"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(n,o,p){"use strict";l.constructor.call(this,n,o);this.setSuggestions(p);var q=[];for(var r=0;r<p.length;++r)q.push(p[r].uid);this.setSuggestionsIds(q);this.setDefaultSuggestionsIds(q)}m.prototype.didStart=function(){"use strict";i.prototype.didStart.call(this);h(function(){var n=this.renderNodes(null,this.getSuggestionsIds());this.invoke("resultsready",n);this.invoke("complete")}.bind(this),0)};m.prototype.matchResults=function(n){"use strict";__p&&__p();if(n.length===0){var o=this.getSuggestionsIds();if(this.getSuggestionsIds().length===0)o=this.getDefaultSuggestionsIds();var p=this.renderNodes(null,o);this.invoke("resultsready",p);this.invoke("complete")}else i.prototype.matchResults.call(this,n)};j(m,{suggestions:[],suggestionsIds:[],defaultSuggestionsIds:[]});f.exports=m}),null);
__d("MCommentActionsFlyout",["Bootloader","CSS","DOM","MActionBubbleHelper","MLegacyDataStore","MModalDialog","MParent","MRequest","Stratcom","URI","cx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();var s="ban_user_from_page_comment_sigil",t="editCommentSigil",u="editHistoryCommentSigil",v="deleteCommentSigil",w="deleteCommentAndBlockAuthorSigil",x="deleteCommentAndRemoveAuthorSigil",y="hideCommentSigil",z="muteMemberSigil",A="reportCommentSigil",B="commentFlyoutSigil",C=false;function D(O,P,Q){var R=j.find(O,"*",P);k.toggleActionBubbleItem(R,Q,"MCommentActionsFlyout",P)}function E(O,P,Q){var R=j.find(O,"*",P),S=!!Q.groupMuteCommenterInfo;k.toggleActionBubbleItem(R,S,"MCommentActionsFlyout",P);if(S&&P===z){var T=j.scry(O,"*",P)[0];i.conditionClass(T,"_4ob2",!Q.groupMuteCommenterInfo.is_commenter_muted)}}function F(O){var P=n.bySigil(O,"comment-metadata");return P}function G(O,P){var Q=l.get(P);O.addQueryData("_ft_",Q.linkdata)}function H(O,P){G(P,O);var Q=new o(P);Q.send()}function I(O,P){m.open(P)}function J(){__p&&__p();var O=F(this.getCausalElement()),P=this.getRoot(),Q=l.get(O);D(P,t,!!Q.editCommentURI);D(P,u,!!Q.editHistoryCommentURI);D(P,v,!!Q.deleteCommentURI);D(P,w,!!Q.deleteCommentAndBlockAuthorURI);D(P,x,!!Q.deleteCommentAndRemoveAuthorURI);D(P,y,!!Q.hideCommentURI);E(P,z,Q);D(P,A,!!Q.reportCommentURI);D(P,s,!!Q.banUserFromPageURIParams&&!C)}function K(O){__p&&__p();var P=l.get(O.getNode(B)),Q=F(P.layer.getCausalElement()),R=l.get(Q);if(O.getNode(t))H(Q,new q(R.editCommentURI));else if(O.getNode(u))H(Q,new q(R.editHistoryCommentURI));else if(O.getNode(v))H(Q,new q(R.deleteCommentURI));else if(O.getNode(w))H(Q,new q(R.deleteCommentAndBlockAuthorURI));else if(O.getNode(x))H(Q,new q(R.deleteCommentAndRemoveAuthorURI));else if(O.getNode(y))H(Q,new q(R.hideCommentURI));else if(O.getNode(z))H(Q,new q(R.groupMuteCommenterInfo.URI));else if(O.getNode(A))if(R.reportIsModalDialog)I(Q,new q(R.reportCommentURI));else H(Q,new q(R.reportCommentURI));else if(O.getNode(s))if(R.banUserFromPageURIParams)h.loadModules(["MPagesBanUserUtils"],function(S){S.banUserFromPage(R.banUserFromPageURIParams.pageID,R.banUserFromPageURIParams.userID,R.banUserFromPageURIParams.userName,function(){C=true})},"MCommentActionsFlyout");P.layer.hide();O.kill()}var L,M,N=function N(O){if(L)return;L=O;var P=O.getRoot();p.addSigil(P,B);M=[p.listen("m:page:unload",null,function(){while(M.length>0)M.pop().remove();L=null}),O.addListener("beforeshow",J,O),j.listen(P,"click",null,K)]};f.exports={registerFlyout:N}}),null);
__d("XLiveCommentRenderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/mobile/live_comment/render/",{})}),null);
__d("MUFILiveComments",["Bootloader","DOM","MLiveData","MParent","MRequest","Stratcom","SubscriptionsHandler","XLiveCommentRenderController","cx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";__p&&__p();var q="feed-ufi-comments",r="m-ufi";function s(t,u){__p&&__p();this.rootElement=t;this.activityElement=i.create("div",{className:"_623b"});this.rootElement.parentNode&&this.rootElement.parentNode.insertBefore(this.activityElement,this.rootElement.nextSibling);this.fetchedComments={};this.feedbackTargetID=u;this.feedbackTarget=j.get(this.feedbackTargetID);this.liveTypingData=null;this.handler=new n();this.handler.addSubscriptions(m.listen("m:ufi:live-comments:new-comment",null,this.onNewComment.bind(this)),m.listen("m:page:unload",null,this.onUnload.bind(this)));if(!this.getIsCommentFlyout())this.initTypingIndicatorSubscription()}s.prototype.initTypingIndicatorSubscription=function(){h.loadModules(["MUFICommentTypingSubscriptionController"],function(t){var u=new t(this.feedbackTargetID,function(v){this.liveTypingData=v;this.updateActivityUI()}.bind(this));if(u.didSubscribe())this.handler.addSubscriptions(u)}.bind(this),"MUFILiveComments")};s.prototype.onNewComment=function(event){__p&&__p();var t=event.getData(),u=t.feedbackTargetID,v=t.commentToken;if(u!==this.feedbackTargetID)return;var w=this.feedbackTarget.getData();if(!this.fetchedComments[v]){var x=o.getURIBuilder().getURI(),y=new l(x);y.setData({comment_token:v,dom_append_id:this.rootElement.id});y.listen("postprocess",function(){var z=w.comments||[];z.push(v);j.update(u,{comments:z});this.updateActivityUI(w.logging_interaction_key)}.bind(this));y.send();this.fetchedComments[v]=true}};s.prototype.getIsCommentFlyout=function(){return!!k.bySigil(this.rootElement,q)};s.prototype.getCommentElement=function(t){var u=t&&t.split("_")[1];return u?document.getElementById(u):null};s.prototype.updateActivityUI=function(t){h.loadModules(["MReactComponentRenderer","MUFILiveCommentActivity.react"],function(u,v){var w=this.liveTypingData||{},x=w.friendCount,y=w.otherCount,z=this.feedbackTarget.getData();u(v,this.activityElement,{comments:z.comments||[],feedbackTargetID:this.feedbackTargetID,isAnyLiveTyping:Math.max(y,x)>0,disablePill:this.getIsCommentFlyout(),isFriendLiveTyping:x>0});var A=z.logging_interaction_key,B=A?[A]:[];if(t&&t!==A)B.push(t);m.invoke("m:ufi:live-comments:render",null,{ufi:k.bySigil(this.rootElement,r),logKeys:B})}.bind(this),"MUFILiveComments")};s.prototype.onUnload=function(){this.handler.release();this.liveTypingData=null};f.exports=s}),null);
__d("MActionBubbleLayout",["CSS","cx"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k){"use strict";this.$MActionBubbleLayout1=null;this.$MActionBubbleLayout2=k}j.prototype.enable=function(){"use strict";this.$MActionBubbleLayout1=this.$MActionBubbleLayout2.addListener("adjustDimensions",this.$MActionBubbleLayout3.bind(this));if(this.$MActionBubbleLayout2.isShown())this.$MActionBubbleLayout2.updatePosition()};j.prototype.disable=function(){"use strict";this.$MActionBubbleLayout1.remove();this.$MActionBubbleLayout1=null;if(this.$MActionBubbleLayout2.isShown())this.$MActionBubbleLayout2.updatePosition()};j.prototype.$MActionBubbleLayout3=function(){"use strict";var k=this.$MActionBubbleLayout2;this.$MActionBubbleLayout4(true);var l=this.$MActionBubbleLayout2.getContentRoot();if(l.clientWidth>=k.getMaxWidth())this.$MActionBubbleLayout4(false)};j.prototype.$MActionBubbleLayout4=function(k){"use strict";var l=this.$MActionBubbleLayout2;l.setWidth(k?"auto":"wide");l.applyWidth();h.conditionClass(l.getRoot(),"_55i0",k)};f.exports=j}),null);