if (self.CavalryLogger) { CavalryLogger.start_js(["NR1wv"]); }

__d("P2PLinkConstants",[],(function a(b,c,d,e,f,g){f.exports={receiverIneligibleHelpURI:"http://www.facebook.com/help/1495718484027862",addDebitCardHelpURI:"http://www.facebook.com/help/200298266807261",helpCenterURI:"http://www.facebook.com/help/863171203733904",contactSupportURI:"http://www.facebook.com/help/contact/1491759007768605",disabledPaymentsSupportURI:"http://www.facebook.com/help/contact/223254857690713",complianceLearnMoreURI:"http://www.facebook.com/help/1555715811351399",complianceLearnMoreMsiteURI:"http://www.facebook.com/help/messenger-app/369959656515129",securePayInfoLearnMoreURI:"http://www.facebook.com/help/146373702454423",contactFraudTeamURI:"http://www.facebook.com/help/contact/370238886476028",payerProtectionURI:"http://www.facebook.com/payer_protection/",helpTransferSystemFailureURI:"http://www.facebook.com/help/contact/614010102040957",helpTransferManualReviewURI:"http://www.facebook.com/help/messenger-app/1463256903894928",helpTransferRecipientCanceledURI:"http://www.facebook.com/help/messenger-app/1564459413784472",helpTransferCompletedURI:"http://www.facebook.com/help/messenger-app/750020781733477",helpTransferCanceledSameCardURI:"http://www.facebook.com/help/messenger-app/818512131561533",helpTransferPushFailURI:"http://www.facebook.com/help/1386991644944095",settingsWWWURI:"http://www.facebook.com/settings?tab=payments",settingsMsiteURI:"http://m.facebook.com/settings/p2p/",mTermsURI:"http://www.facebook.com/legal/m",mHelpURI:"http://www.facebook.com/help/messenger-app/870471599656315",disputeURI:"http://www.facebook.com/help/contact/828169843971429",paymentMethodsURI:"https://www.facebook.com/settings?tab=payments&section=settings",paymentHistoryURI:"https://www.facebook.com/settings?tab=payments&section=history",paymentsTermsURI:"http://www.facebook.com/payments_terms/"}}),null);
__d("FBPaymentsAddressFieldNames",[],(function a(b,c,d,e,f,g){"use strict";var h={STREET1:"street1",STREET2:"street2",CITY:"city",STATE:"state",ZIP:"zip",COUNTRY:"country"};f.exports=h}),null);
__d("FBPaymentsAddressFormBase.react",["FBPaymentsAddressFieldNames","FBPaymentsFormBase.react","FBPaymentsFormFieldBase.react","FBPaymentsFormFieldInputConfigs","FBPaymentsValidators","React","abstractMethod","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();var p,q,r=m.PropTypes;p=babelHelpers.inherits(s,m.PureComponent);q=p&&p.prototype;s.prototype.getStreet1Config=function(){return{validations:[{validator:l.nonEmpty,errorMessage:o._("Please enter your street address.")}]}};s.prototype.getCityConfig=function(){return{validations:[{validator:l.nonEmpty,errorMessage:o._("Please enter your city.")}]}};s.prototype.getStateConfig=function(){return k.ADDRESS_STATE_INPUT_CONFIG};s.prototype.getZipConfig=function(){return k.ADDRESS_ZIP_INPUT_CONFIG};s.prototype.getStreet1Label=function(){return o._("Street address")};s.prototype.getStreet2Label=function(){return o._("Flat\/Suite\/Other (optional)")};s.prototype.getCityLabel=function(){return o._("Town\/City")};s.prototype.getStateLabel=function(){return o._("County\/Region")};s.prototype.getZipLabel=function(){return o._("Postal code")};s.prototype.getCountryLabel=function(){return o._("Country")};s.prototype.__getForm=function(){return n("FBPaymentsAddressFormBase","__getForm")};s.prototype.__getFormField=function(){return n("FBPaymentsAddressFormBase","__getFormField")};s.prototype.__getCountrySelectorField=function(){return n("FBPaymentsAddressFormBase","__getCountrySelectorField")};s.prototype.__getLeftHalfWidthClassName=function(){return n("FBPaymentsAddressFormBase","__getLeftHalfWidthClassName")};s.prototype.__getRightHalfWidthClassName=function(){return n("FBPaymentsAddressFormBase","__getRightHalfWidthClassName")};s.prototype.render=function(){var t=this.__getForm(),u=this.__getFormField(),v=m.createElement(u,{config:this.getStreet1Config(),label:this.getStreet1Label(),name:h.STREET1,required:true}),w=m.createElement(u,{label:this.getStreet2Label(),name:h.STREET2}),x=m.createElement(u,{config:this.getCityConfig(),label:this.getCityLabel(),name:h.CITY,required:true}),y=m.createElement(u,{className:this.__getLeftHalfWidthClassName(),config:this.getStateConfig(),label:this.getStateLabel(),name:h.STATE,required:true}),z=m.createElement(u,{className:this.__getRightHalfWidthClassName(),config:this.getZipConfig(),label:this.getZipLabel(),name:h.ZIP,required:true}),A=void 0;if(this.props.showCountrySelector){var B=this.__getCountrySelectorField();A=m.createElement(B,{label:this.getCountryLabel(),name:h.COUNTRY,required:true})}var C=this.props.prefilledFormData||{};return m.createElement(t,{enableFloatingLabels:this.props.enableFloatingLabels,className:this.props.className,onChange:this.props.onChange,prefilledFormData:C},v,w,x,y,z,A)};function s(){p.apply(this,arguments)}s.propTypes={className:r.string,onChange:r.func.isRequired,enableFloatingLabels:r.bool.isRequired,prefilledFormData:r.object,showCountrySelector:r.bool.isRequired};s.defaultProps={enableFloatingLabels:false,showCountrySelector:false};f.exports=s}),null);
__d("MFBPaymentsAddressForm.react",["FBPaymentsAddressFormBase.react","MFBPaymentsCountrySelectorFormField.react","MFBPaymentsForm.react","MFBPaymentsFormField.react","cx"],(function a(b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m,n;m=babelHelpers.inherits(o,h);n=m&&m.prototype;o.prototype.__getForm=function(){return j};o.prototype.__getFormField=function(){return k};o.prototype.__getCountrySelectorField=function(){return i};o.prototype.__getLeftHalfWidthClassName=function(){return"_5z_8 _uej"};o.prototype.__getRightHalfWidthClassName=function(){return"_5z_8 _uef"};o.prototype.render=function(){return n.render.call(this)};function o(){m.apply(this,arguments)}o.propTypes=h.propTypes;f.exports=o}),null);
__d("MP2PCreditCardForm.react",["Keys","MJSEnvironment","PaymentMethodUtils","React","AbstractTextInput.react","CreditCardFormParam","MP2PAPI","MXUICard.react","MXUIDiv.react","MXUILayout.react","MXUILayoutFillColumn.react","cx","emptyFunction","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";__p&&__p();var v,w,x=k.PropTypes,y=i.IS_ANDROID&&i.OS_VERSION<4;function z(D){return D.replace(/\D/g,"")}function A(D,E){return D.substr(0,E)}function B(D,E,F){var G="";for(var H=1;H<F.length;H++){if(F[H]>D.length||H===F.length-1){G+=D.slice(F[H-1]);break}G+=D.slice(F[H-1],F[H])+E}return G}v=babelHelpers.inherits(C,k.Component);w=v&&v.prototype;function C(D){__p&&__p();w.constructor.call(this,D);this.handleOnKeyDown=function(event){var F=event.keyCode,G=F===h.BACKSPACE||F===h.DELETE;this.setState({justBackspaced:G})}.bind(this);this.shouldValidate=function(F){return!y||F};this.handleOnCreditCardNumberChange=function(event,F){__p&&__p();var G=event.target.value,H=G;if(!this.state.justBackspaced&&this.shouldValidate(F)){var I=[0,4,8,12,16],J=16;G=z(G);G=A(G,J);H=B(G," ",I)}var K=this.isValidCardType(G),L=j.isValidCCNumber(G)&&K;this.validateBIN(G);var M=null;F=F||!K;if(F&&!L&&G!=="")M=u._("Please enter a Visa or MasterCard debit card. Credit cards can't be used.");this.setState({ccNumber:H,ccNumberError:M,ccNumberValid:L},function(){this.updateOverallError(this.state.binError||M);this.onFormInfoValidityChange()}.bind(this))}.bind(this);this.handleOnExpiryChange=function(event,F){this.validateAndSetExpiry(event.target.value,F)}.bind(this);this.validateAndSetExpiry=function(F,G){__p&&__p();var H=false,I="";if(!this.state.justBackspaced&&this.shouldValidate(G)){F=z(F);F=A(F,4);I=F.substr(0,1);if(I!=="0"&&I!=="1")F="0"+F;F=B(F,"/",[0,2,4]);H=this.validateExpiry(F)}var J=null;if(G&&!H&&F!=="")J=u._("Please enter a valid expiry date.");this.setState({expiry:F,expiryError:J,expiryValid:H},function(){this.updateOverallError(J);this.onFormInfoValidityChange()}.bind(this))}.bind(this);this.handleOnCvcChange=function(event,F){__p&&__p();var G=event.target.value,H=3;if(this.shouldValidate(F)){G=z(G);G=A(G,H)}var I=G.length===H,J=null;if(F&&!I&&G!=="")J=u._("Please enter a valid 3-digit security code.");this.setState({cvc:G,cvcError:J,cvcValid:I},function(){this.updateOverallError(J);this.onFormInfoValidityChange()}.bind(this))}.bind(this);this.handleOnZipCodeChange=function(event,F){this.validateAndSetZipCode(event.target.value,F)}.bind(this);this.validateAndSetZipCode=function(F,G){__p&&__p();if(this.shouldValidate(G)){F=z(F);F=A(F,5)}var H=F.length===5,I=null;if(G&&!H&&F!=="")I=u._("Please enter a valid 5-digit ZIP code.");this.setState({zipCode:F,zipCodeError:I,zipCodeValid:H},function(){this.updateOverallError(I);this.onFormInfoValidityChange()}.bind(this))}.bind(this);this.handleBINNumberValidated=function(F){if(this.state.previousBINNumber!==F.binNumber)return;this.setState({binError:null,binValid:true},function(){this.updateOverallError(null);this.onFormInfoValidityChange()}.bind(this))}.bind(this);this.handleBINNumberValidatedError=function(F){if(this.state.previousBINNumber!==F.binNumber)return;var G=u._("Please enter a debit card. Credit cards can't be used.");this.setState({binError:G,binValid:false},function(){this.updateOverallError(G);this.onFormInfoValidityChange()}.bind(this))}.bind(this);this.updateOverallError=function(F){var G=F||this.state.binError||this.state.ccNumberError||this.state.expiryError||this.state.cvcError||this.state.zipCodeError;this.setState({overallError:G})}.bind(this);this.onFormInfoValidityChange=function(){var F=this.state.binValid&&this.state.ccNumberValid&&this.state.expiryValid&&this.state.cvcValid&&this.state.zipCodeValid,G=null;if(F)G={creditCardNumber:this.state.ccNumber,exp:this.state.expiry,csc:this.state.cvc,zip:this.state.zipCode};this.props.onFormInfoValidityChange(F,G)}.bind(this);this.validateBIN=function(F){__p&&__p();this.$MP2PCreditCardForm1&&this.$MP2PCreditCardForm1.abort();delete this.$MP2PCreditCardForm1;var G=void 0;F=F.replace(/ /g,"");G=F.substr(0,6);if(G!==this.state.previousBINNumber&&G.length>=6)this.$MP2PCreditCardForm1=n.validateBINNumber({binNumber:G,error:this.handleBINNumberValidatedError,success:this.handleBINNumberValidated});else if(G.length<6)this.setState({binError:null,binValid:false},function(){this.updateOverallError(null);this.onFormInfoValidityChange()}.bind(this));this.setState({previousBINNumber:G})}.bind(this);this.isValidCardType=function(F){var G=["mc","visa","unknown"],H=j.getCardType(F),I=H?H.name:"",J=G.indexOf(I)>=0;return J};this.validateExpiry=function(F){if(F.length!==5)return false;var G=F.split("/"),H=new Date(),I=parseInt(H.getFullYear().toString().substring(2),10),J=H.getMonth()+1,K=parseInt(G[0],10),L=parseInt(G[1],10);if(!K||!L||isNaN(K)||isNaN(L)||K<1||K>12)return false;if(L<I||L===I&&K<J)return false;return true};var E=D.prefilledFormData&&D.prefilledFormData[m.CARD_NUMBER]?D.prefilledFormData[m.CARD_NUMBER]:"";this.state={ccNumber:E,expiry:"",cvc:"",previousBINNumber:"",zipCode:"",binValid:!!E,ccNumberValid:!!E,expiryValid:false,cvcValid:false,zipCodeValid:false,binError:null,ccNumberError:null,expiryError:null,cvcError:null,zipCodeError:null,overallError:null,justBackspaced:false}}C.prototype.componentWillMount=function(){if(this.props.prefilledFormData){var D=this.props.prefilledFormData[m.CARD_EXPIRATION],E=this.props.prefilledFormData[m.ZIP];if(D)this.validateAndSetExpiry(D,true);if(E)this.validateAndSetZipCode(E,true)}};C.prototype.componentWillUnmount=function(){this.$MP2PCreditCardForm1&&this.$MP2PCreditCardForm1.abort();delete this.$MP2PCreditCardForm1};C.prototype.render=function(){__p&&__p();var D=this.props.editMode?u._("Debit card"):u._("Add Debit Card"),E=u._("Card Number"),F=u._("Expiry Date (MM\/YY)"),G=u._("CVV"),H=u._("ZIP code"),I=null;if(this.props.errorMessage)if(this.props.errorMessage.__html)I=k.createElement(p,{className:"_5feh _3-8w",dangerouslySetInnerHTML:this.props.errorMessage,fontsize:"small"});else I=k.createElement(p,{className:"_5feh _3-8w",fontsize:"small"},this.props.errorMessage);else if(this.state.overallError)I=k.createElement(p,{className:"_5feh _3-8w",fontsize:"small"},this.state.overallError);var J=this.state.binError||this.state.ccNumberError,K=!!(this.props.prefilledFormData&&this.props.prefilledFormData[m.CARD_NUMBER]);return k.createElement(o,{className:"_5fei"},k.createElement(p,{padding:"medium"},k.createElement(p,{className:"_3-8r"},k.createElement(p,{fontshade:"light",fontsize:"smallcaps",fontweight:"bold"},D),I)),k.createElement(p,null,k.createElement(l,{className:(J?"_5fej":"")+" _l0g _2pi9 _2pi3",disabled:K,onBlur:function(event){return this.handleOnCreditCardNumberChange(event,true)}.bind(this),onChange:this.handleOnCreditCardNumberChange,onKeyDown:this.handleOnKeyDown,placeholder:E,type:"tel",value:this.state.ccNumber})),k.createElement(p,null,k.createElement(l,{className:(this.state.expiryError?"_5fej":"")+" _l0g _2pi9 _2pi3",onBlur:function(event){return this.handleOnExpiryChange(event,true)}.bind(this),onChange:this.handleOnExpiryChange,onKeyDown:this.handleOnKeyDown,placeholder:F,type:"tel",value:this.state.expiry})),k.createElement(q,null,k.createElement(r,null,k.createElement(l,{className:(this.state.cvcError?"_5fej":"")+" _l0g _2pi9 _2pi3",onBlur:function(event){return this.handleOnCvcChange(event,true)}.bind(this),onChange:this.handleOnCvcChange,onKeyDown:this.handleOnKeyDown,placeholder:G,type:"tel",value:this.state.cvc})),k.createElement(r,{className:"_2nq5"},k.createElement(l,{className:(this.state.zipCodeError?"_5fej":"")+" _l0g _2pi9 _2pi3",onBlur:function(event){return this.handleOnZipCodeChange(event,true)}.bind(this),onChange:this.handleOnZipCodeChange,onKeyDown:this.handleOnKeyDown,placeholder:H,type:"tel",value:this.state.zipCode}))))};C.propTypes={editMode:x.bool,errorMessage:x.oneOfType([x.string,x.object]),onFormInfoValidityChange:x.func,prefilledFormData:x.object};C.defaultProps={editMode:false,errorMessage:"",onFormInfoValidityChange:t,prefilledFormData:null};f.exports=C}),null);
__d("MP2PAddCreditCard.react",["CreditCardFormParam","Middot.react","MLink.react","MP2PAPI","MP2PCreditCardForm.react","MXUIButton.react","MXUIDiv.react","MXUILayout.react","MXUILayoutFillColumn.react","P2PLinkConstants","React","cx","emptyFunction","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";__p&&__p();var v,w,x=r.PropTypes;v=babelHelpers.inherits(y,r.Component);w=v&&v.prototype;function y(){__p&&__p();var z,A;for(var B=arguments.length,C=Array(B),D=0;D<B;D++)C[D]=arguments[D];return A=(z=w.constructor).call.apply(z,[this].concat(C)),this.$MP2PAddCreditCard1=false,this.state={isInfoValid:false,ccInfo:null,isSubmitting:false,errorMessageInHTML:"",cardAdded:null},this.handleOnFormInfoValidityChange=function(E,F){this.setState({isInfoValid:E,ccInfo:F})}.bind(this),this.handleSubmitButtonOnClick=function(){if(this.state.isSubmitting||!this.state.isInfoValid)return;k.addCreditCard({success:this.$MP2PAddCreditCard2(this.handleAddCardSuccess),error:this.$MP2PAddCreditCard2(this.handleAddCardError),formData:this.state.ccInfo});this.setState({isSubmitting:true})}.bind(this),this.handleAddCardSuccess=function(E){this.setState({errorMessageInHTML:"",cardAdded:E});if(this.props.setPreset){var F={};F[h.CREDENTIAL_ID]=E.getCredentialId();k.updatePresetCreditCard({formData:F,success:this.$MP2PAddCreditCard2(this.handleUpdatePresetCreditCard),error:this.$MP2PAddCreditCard2(this.handleUpdatePresetCreditCard)})}else this.onComplete()}.bind(this),this.onComplete=function(){this.setState({isSubmitting:false});this.props.onCreditCardAdded()}.bind(this),this.handleUpdatePresetCreditCard=function(){this.onComplete()}.bind(this),this.handleAddCardError=function(E){__p&&__p();var F=void 0,G=E.general;if(G)F=G.message;var H=E.fields;if(!F&&H)for(var I in H)if(Object.prototype.hasOwnProperty.call(H,I)){F=H[I].message;break}this.setState({errorMessageInHTML:F,isSubmitting:false})}.bind(this),A}y.prototype.componentDidMount=function(){this.$MP2PAddCreditCard1=true};y.prototype.componentWillUnmount=function(){this.$MP2PAddCreditCard1=false};y.prototype.$MP2PAddCreditCard2=function(z){return function(){return this.$MP2PAddCreditCard1&&z.apply(undefined,arguments)}.bind(this)};y.prototype.render=function(){var z=u._("Back"),A=u._("Done");return r.createElement(n,{padding:"large"},r.createElement(n,{className:"_3-96",fontshade:"light",fontsize:"small"},u._("Credit cards can't be used.")),r.createElement(l,{errorMessage:this.state.errorMessageInHTML,onFormInfoValidityChange:this.handleOnFormInfoValidityChange}),r.createElement(n,{className:"_3-8o",fontshade:"light",fontsize:"small"},u._("Your payment info is stored securely.")),r.createElement(n,{className:"_3-8o",fontshade:"light",fontsize:"small"},r.createElement(j,{href:q.addDebitCardHelpURI,target:"_blank"},u._("Learn More")),r.createElement(i,null),r.createElement(j,{href:q.paymentsTermsURI,target:"_blank"},u._("Terms"))),r.createElement(o,null,r.createElement(p,{className:"_3-92"},r.createElement(m,{className:"_18yj touchable",disabled:this.state.isSubmitting||this.state.cardAdded,onClick:this.props.onBack,size:"large",use:"normal"},z)),r.createElement(p,null,r.createElement(m,{className:"_18yj touchable",disabled:!this.state.isInfoValid||this.state.isSubmitting||this.state.cardAdded,onClick:this.handleSubmitButtonOnClick,size:"large",use:"primary"},A))))};y.propTypes={onCreditCardAdded:x.func,onBack:x.func,setPreset:x.bool};y.defaultProps={onCreditCardAdded:t,onBack:t,setPreset:false};f.exports=y}),null);
__d("MP2PCreditCardListItem.react",["Image.react","MP2PCreditCard","MXUIDiv.react","MXUILayout.react","MXUILayoutColumn.react","MXUILayoutFillColumn.react","MXUISpan.react","React","cx","emptyFunction","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s,t,u=o.PropTypes;s=babelHelpers.inherits(v,o.Component);t=s&&s.prototype;function v(){var w,x;for(var y=arguments.length,z=Array(y),A=0;A<y;A++)z[A]=arguments[A];return x=(w=t.constructor).call.apply(w,[this].concat(z)),this.handleCreditCardListItemClick=function(B){this.props.onClick(B)}.bind(this),this.renderPrimaryCardIcon=function(){if(!this.props.creditCard.getIsPreset()||!this.props.showPrimaryCardIcon)return null;return o.createElement(j,{className:"_4l-t"+(this.props.showNavArrow?" _4l-u":"")})}.bind(this),x}v.prototype.render=function(){var w=this.props.creditCard;return o.createElement(j,{className:"_4l-x",padding:"medium",onClick:this.handleCreditCardListItemClick.bind(this,w)},o.createElement(k,{className:"_3-8r _3-8n"+(this.props.showNavArrow?" _4l-y":"")},o.createElement(l,null,o.createElement(h,{src:w.getImageLarge(),alt:w.getName()})),o.createElement(m,{className:"_3-9b"},o.createElement(j,null,o.createElement(n,{fontweight:"bold"},w.getName()+" "+w.getCategoryName())," *"+w.getCreditCardNumber()),o.createElement(j,{fontshade:"light",fontsize:"small"},r._("Exp {date of expiration}",[r.param("date of expiration",w.getExpFormattedShort())]))),this.renderPrimaryCardIcon(),this.props.actionButton))};v.propTypes={actionButton:u.node,creditCard:u.instanceOf(i).isRequired,onClick:u.func.isRequired,showNavArrow:u.bool,showPrimaryCardIcon:u.bool};v.defaultProps={actionButton:null,onClick:q,showNavArrow:true,showPrimaryCardIcon:true};f.exports=v}),null);
__d("MP2PEditCreditCard.react",["CreditCardFormParam","MP2PAPI","MP2PCreditCard","MP2PCreditCardForm.react","MXUIButton.react","MXUIDiv.react","MXUILayout.react","MXUILayoutFillColumn.react","P2PLinkConstants","React","cx","emptyFunction","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";__p&&__p();var u,v,w=q.PropTypes;u=babelHelpers.inherits(x,q.Component);v=u&&u.prototype;function x(){__p&&__p();var y,z;for(var A=arguments.length,B=Array(A),C=0;C<A;C++)B[C]=arguments[C];return z=(y=v.constructor).call.apply(y,[this].concat(B)),this.$MP2PEditCreditCard1=false,this.state={cardUpdated:null,ccInfo:null,errorMessageInHTML:"",isInfoValid:false,isSubmitting:false},this.getPrefilledFormData=function(){var D={};D[h.CARD_NUMBER]=this.props.creditCard.getCreditCardNumberMask();D[h.CARD_EXPIRATION]=this.props.creditCard.getExpFormattedShort();D[h.ZIP]=this.props.creditCard.getZipCode();return D}.bind(this),this.handleOnFormInfoValidityChange=function(D,E){this.setState({isInfoValid:D,ccInfo:E})}.bind(this),this.handleSubmitButtonOnClick=function(){if(this.state.isSubmitting||!this.state.isInfoValid)return;var D=babelHelpers["extends"]({},this.state.ccInfo);D[h.CREDENTIAL_ID]=this.props.creditCard.getCredentialId();i.updateCreditCard({error:this.$MP2PEditCreditCard2(this.handleUpdateCardError),formData:D,success:this.$MP2PEditCreditCard2(this.handleUpdateCardSuccess)});this.setState({isSubmitting:true})}.bind(this),this.handleUpdateCardSuccess=function(D){this.setState({cardUpdated:D,errorMessageInHTML:"",isSubmitting:false});this.props.onCreditCardUpdated(D)}.bind(this),this.handleUpdateCardError=function(D){__p&&__p();var E=void 0,F=D.general;if(F)E=F.message;var G=D.fields;if(!E&&G)for(var H in G)if(Object.prototype.hasOwnProperty.call(G,H)){E=G[H].message;break}this.setState({errorMessageInHTML:E,isSubmitting:false})}.bind(this),z}x.prototype.componentDidMount=function(){this.$MP2PEditCreditCard1=true};x.prototype.componentWillUnmount=function(){this.$MP2PEditCreditCard1=false};x.prototype.$MP2PEditCreditCard2=function(y){return function(){return this.$MP2PEditCreditCard1&&y.apply(undefined,arguments)}.bind(this)};x.prototype.render=function(){var y=t._("Back"),z=t._("Save");return q.createElement(m,{padding:"large"},q.createElement(k,{editMode:true,errorMessage:this.state.errorMessageInHTML,onFormInfoValidityChange:this.handleOnFormInfoValidityChange,prefilledFormData:this.getPrefilledFormData()}),q.createElement(m,{className:"_3-8o",fontshade:"light",fontsize:"small"},t._("Your payment info has been stored securely. {Link to P2P learn more page.}",[t.param("Link to P2P learn more page.",q.createElement("a",{href:p.addDebitCardHelpURI,target:"_blank"},t._("Learn more.")))])),q.createElement(n,null,q.createElement(o,{className:"_3-92"},q.createElement(l,{className:"_18yj touchable",disabled:this.state.isSubmitting||this.state.cardUpdated,onClick:this.props.onBack,size:"large",use:"normal"},y)),q.createElement(o,null,q.createElement(l,{className:"_18yj touchable",disabled:!this.state.isInfoValid||this.state.isSubmitting||this.state.cardUpdated,onClick:this.handleSubmitButtonOnClick,size:"large",use:"primary"},z))))};x.propTypes={creditCard:w.instanceOf(j).isRequired,onBack:w.func.isRequired,onCreditCardUpdated:w.func.isRequired};x.defaultProps={onBack:s,onCreditCardUpdated:s};f.exports=x}),null);
__d("MP2PCreditCardPage.react",["CreditCardFormParam","MP2PAPI","MP2PCreditCard","MP2PCreditCardListItem.react","MP2PEditCreditCard.react","MXUIButton.react","MXUICard.react","MXUIDiv.react","MXUILayout.react","MXUILayoutColumn.react","MXUILayoutFillColumn.react","React","cx","emptyFunction","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";__p&&__p();var w,x,y=s.PropTypes;w=babelHelpers.inherits(z,s.Component);x=w&&w.prototype;function z(){__p&&__p();var A,B;for(var C=arguments.length,D=Array(C),E=0;E<C;E++)D[E]=arguments[E];return B=(A=x.constructor).call.apply(A,[this].concat(D)),this.$MP2PCreditCardPage1=false,this.state={errorMessage:null,isUpdatingCreditCard:false},this.handleOnBack=function(){this.props.onBack()}.bind(this),this.handleOnDeleteCard=function(){var F={};F[h.CREDENTIAL_ID]=this.props.creditCard.getCredentialId();i.deleteCreditCard({error:this.$MP2PCreditCardPage2(this.handleOnDeleteCardError),formData:F,success:this.$MP2PCreditCardPage2(this.handleOnDeleteCardSuccess)})}.bind(this),this.handleOnDeleteCardSuccess=function(F){this.setState({errorMessage:""});this.props.onCreditCardDeleted(this.props.creditCard)}.bind(this),this.handleOnDeleteCardError=function(){this.setState({errorMessage:v._("Sorry, something went wrong. Please try again later.")})}.bind(this),this.handleOnUpdateCard=function(){this.setState({isUpdatingCreditCard:true})}.bind(this),this.handleOnUpdateCardBack=function(){this.setState({isUpdatingCreditCard:false})}.bind(this),this.handleOnCardUpdated=function(F){this.setState({isUpdatingCreditCard:false});this.props.onCreditCardUpdated(F)}.bind(this),this.handleOnSetPrimaryCard=function(){__p&&__p();var F=this.props.creditCard;if(F.getIsPreset())return;if(!F.getIsPersonalTransferEligible()){var G=v._("Only debit cards can be used to receive money.");this.setState({errorMessage:G});return}if(!F.getIsVerified()){var H=v._("To use this card, please verify it by going to Facebook on a computer, then Settings, then Payments in Messenger.");this.setState({errorMessage:H});return}var I={};I[h.CREDENTIAL_ID]=F.getCredentialId();i.updatePresetCreditCard({error:this.$MP2PCreditCardPage2(this.handleOnSetPrimaryCardError),formData:I,success:this.$MP2PCreditCardPage2(this.handleOnSetPrimaryCardSuccess)})}.bind(this),this.handleOnSetPrimaryCardError=function(F){this.setState({errorMessage:F})}.bind(this),this.handleOnSetPrimaryCardSuccess=function(){this.props.onCreditCardSetPrimary(this.props.creditCard);this.setState({errorMessage:""})}.bind(this),this.showSetPrimaryButton=function(){var F=this.props.creditCard;return!F.getIsPreset()&&F.getIsPersonalTransferEligible()}.bind(this),this.renderBlockButtons=function(){var F="_56b_ _5aey",G="medium",H=v._("Back"),I=v._("Receive Money with this Card"),J=this.showSetPrimaryButton()?s.createElement(m,{className:F,label:I,onClick:this.handleOnSetPrimaryCard,size:G,use:"primary"}):null;return s.createElement(o,null,J,s.createElement(m,{className:F,label:H,onClick:this.handleOnBack,size:G}))}.bind(this),this.renderEditCardButton=function(){return s.createElement(m,{className:"_5aez",onClick:this.handleOnUpdateCard,size:"small",use:"normal"},v._("Edit"))}.bind(this),this.renderMessageSection=function(){if(!this.props.creditCard.getIsPreset())return null;var F=v._("This payment method is used to receive money from your friends.");return s.createElement(o,{padding:"medium",className:"_3-8r"},s.createElement(p,null,s.createElement(q,{className:"_5ae-"},s.createElement(o,{className:"_5ae_"})),s.createElement(r,null,s.createElement(o,{className:"_5af0",fontshade:"light",fontsize:"small"},F))))}.bind(this),this.renderErrorMessageSection=function(){if(!this.state.errorMessage)return null;return s.createElement(o,{className:"_3-8r",padding:"medium"},this.state.errorMessage)}.bind(this),B}z.prototype.componentDidMount=function(){this.$MP2PCreditCardPage1=true};z.prototype.componentWillUnmount=function(){this.$MP2PCreditCardPage1=false};z.prototype.$MP2PCreditCardPage2=function(A){return function(){return this.$MP2PCreditCardPage1&&A.apply(undefined,arguments)}.bind(this)};z.prototype.render=function(){var A=this.props.creditCard,B=v._("Debit card"),C=this.state.isUpdatingCreditCard?s.createElement(l,{creditCard:A,onBack:this.handleOnUpdateCardBack,onCreditCardUpdated:this.handleOnCardUpdated}):null,D=this.state.isUpdatingCreditCard;return s.createElement(o,{className:"_5af1"},C,s.createElement(o,{className:D?"_5af2":"",padding:"large"},s.createElement(n,{className:"_3-98"},s.createElement(o,{fontshade:"light",fontsize:"smallcaps",fontweight:"bold",padding:"medium"},s.createElement(o,{className:"_3-8r"},B)),this.renderErrorMessageSection(),s.createElement(k,{actionButton:this.renderEditCardButton(),creditCard:A,showNavArrow:false,showPrimaryCardIcon:false}),this.renderMessageSection()),this.renderBlockButtons()))};z.propTypes={creditCard:y.instanceOf(j).isRequired,onBack:y.func.isRequired,onCreditCardDeleted:y.func.isRequired,onCreditCardSetPrimary:y.func.isRequired,onCreditCardUpdated:y.func.isRequired};z.defaultProps={onBack:u,onCreditCardDeleted:u,onCreditCardSetPrimary:u,onCreditCardUpdated:u};f.exports=z}),null);
__d("P2PGatingFailReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NON_PERSONAL_USER:"non_personal_user",IS_WORK_USER:"is_work_user",P2P_ENABLED_GK_FAIL:"p2p_enabled_gk_fail",P2P_ELIGIBLE_GK_FAIL:"p2p_eligible_gk_fail",HAS_NOT_RECEIVED_MONEY:"has_not_received_money",PAYMENT_ACCOUNT_DISABLED:"payment_account_disabled",MBASIC:"mbasic",IS_PARTIAL_ACCOUNT:"is_partial_account",IS_MOMENTS_ONLY_ACCOUNT:"is_moments_only_account",IS_PARTIES_ONLY_ACCOUNT:"is_parties_only_account",EXCEPTION:"exception",APP_CAPABILITY:"app_capability",USER_BLOCKED:"user_blocked",MESSAGES_BLOCKED:"messages_blocked",SVA_RECEIVER_GATING:"sva_receiver_gating"})}),null);
__d("PaymentSettingsStringUtils",["P2PGatingFailReason","P2PLinkConstants","React","fbt"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";var l={getPaymentsDPOText:function m(){return k._("For your security, payments have been temporarily turned off. Please {=contact us} to learn more.",[k.param("=contact us",j.createElement("a",{href:i.disabledPaymentsSupportURI},"contact us"))])},getGeneralP2PDisabledText:function m(){return k._("You are unable to use payments in messages at the moment. Please try again later.")},getP2PDisabledText:function m(n){switch(n){case h.PAYMENT_ACCOUNT_DISABLED:return this.getPaymentsDPOText();default:return this.getGeneralP2PDisabledText()}}};f.exports=l}),null);
__d("MP2PDPONotification.react",["Image.react","MXUIDiv.react","MXUISpan.react","PaymentSettingsStringUtils","React","cx","ix"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o,p;o=babelHelpers.inherits(q,l.Component);p=o&&o.prototype;q.prototype.render=function(){return l.createElement(i,{className:"_3-8q"},l.createElement(i,{className:"_tmk"},l.createElement(h,{src:n("316099")})),l.createElement(j,{className:"_tml"},k.getPaymentsDPOText()))};function q(){o.apply(this,arguments)}f.exports=q}),null);
__d("FBPaymentsPhysicalAddressBase.react",["P2PGKValues","React","URI","abstractMethod","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m,n;m=babelHelpers.inherits(o,i.Component);n=m&&m.prototype;function o(){__p&&__p();var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=n.constructor).call.apply(p,[this].concat(s)),this.state={isShowingForm:new j(window.location.href).getQueryData().action==="showPhysicalAddressForm",physicalAddressGK:h.SettingsPhysicalAddressEnabled,isUserCompliant:true,physicalAddress:null,errorMessage:null},this.handleGetUserCompliance=function(u){this.setState({isUserCompliant:u})}.bind(this),this.handleGetPhysicalAddress=function(u){if(Object.keys(u).length>0)this.setState({physicalAddress:u})}.bind(this),this.handleAPIError=function(u){this.setState({errorMessage:l._("There was an error while handling your request. Please try again later")})}.bind(this),this.onAddPhysicalAddressClick=function(){this.setState({isShowingForm:true})}.bind(this),this.onFormCancel=function(){this.setState({isShowingForm:false})}.bind(this),this.getAddressText=function(){if(this.state.errorMessage)return this.state.errorMessage;else if(this.state.physicalAddress)return this.state.physicalAddress.single_line;else return l._("Please add a physical address to comply with payment regulations.")}.bind(this),this.fetchState=function(){return k("FBPaymentsPhysicalAddressBase","fetchState")},q}o.prototype.getTitle=function(){return l._("Physical address")};o.prototype.getDisclaimer=function(){return l._("This information is required to comply with new payment regulations. Your address will be saved for future use on Facebook and can be updated at any time in payment settings.")};o.prototype.getAddLinkText=function(){return l._("Update physical address")};o.prototype.componentWillMount=function(){this.fetchState()};o.prototype.renderComponent=function(){return k("FBPaymentsPhysicalAddressBase","renderComponent")};o.prototype.render=function(){if(this.state.physicalAddressGK&&(!this.state.isUserCompliant||this.state.physicalAddress))return this.renderComponent();return null};f.exports=o}),null);
__d("MP2PPhysicalAddressForm.react",["MFBPaymentsAddressForm.react","MXUIButton.react","MXUIDiv.react","MXUILayout.react","MXUILayoutFillColumn.react","React","cx","fbt"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();var p,q;p=babelHelpers.inherits(r,m.PureComponent);q=p&&p.prototype;function r(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=q.constructor).call.apply(s,[this].concat(v)),this.state={formData:{},isFormValid:false},this.onFormDataChanged=function(x,y){this.setState({formData:x,isFormValid:y})}.bind(this),this.onSubmit=function(){if(!this.state.isFormValid)return;this.props.onFormSubmit(this.state.formData,this.state.isFormValid)}.bind(this),t}r.prototype.render=function(){return m.createElement(j,null,this.renderForm(),this.renderFormButtons())};r.prototype.renderForm=function(){return m.createElement(h,{onChange:this.onFormDataChanged})};r.prototype.renderFormButtons=function(){return m.createElement(j,null,m.createElement(j,{className:"_4ydq",fontshade:"light",fontsize:"small"},this.props.formDisclaimer),m.createElement(k,{className:"_2pi5"},m.createElement(l,{className:"_2pi9"},m.createElement(i,{className:"_4ydu",onClick:this.props.onFormCancel,size:"large",use:"normal"},o._("Cancel"))),m.createElement(l,{className:"_2pi9"},m.createElement(i,{className:"_4ydu",disabled:!this.state.isFormValid,onClick:this.onSubmit,size:"large",use:"primary"},o._("Submit")))))};f.exports=r}),null);
__d("MP2PPhysicalAddressComponent.react",["FBPaymentsPhysicalAddressBase.react","MP2PAPI","MP2PPhysicalAddressForm.react","MXUICard.react","MXUIDiv.react","React","cx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();var o,p;o=babelHelpers.inherits(q,h);p=o&&o.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=p.constructor).call.apply(r,[this].concat(u)),this.fetchState=function(){this.setState({errorMessage:null});i.getIsUserAddressCompliant({success:this.handleGetUserCompliance,error:this.handleAPIError});i.getPhysicalAddress({success:this.handleGetPhysicalAddress,error:this.handleAPIError})}.bind(this),this.onFormSubmit=function(w,x){this.setState({isShowingForm:false});i.mutatePhysicalAddress({requestData:w,success:this.fetchState,error:this.handleAPIError})}.bind(this),this.onFormDataChanged=function(){},s}q.prototype.renderComponent=function(){var r=null,s=null;if(this.state.isShowingForm)r=m.createElement(j,{onFormSubmit:this.onFormSubmit,onFormCancel:this.onFormCancel,formDisclaimer:this.getDisclaimer()});else{r=m.createElement(l,{fontshade:"light",fontsize:"small",className:"_2pi8 _2pi5"},this.getAddressText());s=this.renderShowFormButton()}return m.createElement(k,{className:"_3-97"},m.createElement(l,{fontshade:"light",fontsize:"smallcaps",fontweight:"bold",padding:"medium"},this.getTitle()),r,s)};q.prototype.renderShowFormButton=function(){return m.createElement(l,{fontweight:"bold",onClick:this.onAddPhysicalAddressClick,padding:"medium"},m.createElement(l,{className:"_62ii"},this.getAddLinkText()))};f.exports=q}),null);
__d("MP2PSelectCreditCard.react",["Image.react","MP2PAPI","MP2PCreditCardListItem.react","MXUICard.react","MXUIDiv.react","React","cx","emptyFunction","fbt","ix"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r=m.PropTypes,s=m.createClass({displayName:"MP2PSelectCreditCard",propTypes:{onAddNewCardSelected:r.func,onCreditCardSelected:r.func},getDefaultProps:function t(){return{onAddNewCardSelected:o,onCreditCardSelected:o}},getInitialState:function t(){return{creditCards:null,isLoading:false,errorMessage:null}},fetchCreditCards:function t(){this.setState({isLoading:true,errorMessage:null,creditCards:null});this._creditCardsRequest=i.getAllCreditCards({success:this._handleGetAllCreditCardsSuccess,error:this._handleGetAllCreditCardsError})},_handleGetAllCreditCardsSuccess:function t(u){delete this._creditCardsRequest;this.setState({creditCards:u.filter(function(v){return v.getIsVerified()||v.getIsMobileVerified()}),isLoading:false,errorMessage:null})},_handleGetAllCreditCardsError:function t(u){delete this._creditCardsRequest;this.setState({errorMessage:u,creditCards:null,isLoading:false})},selectCreditCard:function t(u){this.props.onCreditCardSelected(u)},componentWillMount:function t(){this.fetchCreditCards()},componentWillUnmount:function t(){this._creditCardsRequest&&this._creditCardsRequest.abort()},render:function t(){__p&&__p();var u=p._("Payment methods"),v=p._("Add Debit Card"),w=null;if(this.state.creditCards!=null)w=this.state.creditCards.map(function(z){return m.createElement(j,{creditCard:z,key:z.getCredentialId(),onClick:this.selectCreditCard.bind(this,z)})}.bind(this));var x=null;if(this.state.isLoading)x=m.createElement(l,{padding:"medium",textalign:"center"},m.createElement(h,{height:24,src:q("101346"),width:24}));var y=null;if(this.state.errorMessage)y=m.createElement(l,{padding:"medium"},m.createElement(l,{className:"_3-8r"},this.state.errorMessage));return m.createElement(l,null,m.createElement(k,null,m.createElement(l,{fontshade:"light",fontsize:"smallcaps",fontweight:"bold",padding:"medium"},m.createElement(l,{className:"_3-8r"},u)),x,y,w,m.createElement(l,{fontweight:"bold",onClick:this.props.onAddNewCardSelected,padding:"medium"},m.createElement(l,{className:"_3-8r _q1e"},v))))}});f.exports=s}),null);
__d("MP2PTransactionHistoryCell.react",["Image.react","InlineBlock.react","MXUIDiv.react","MXUILayout.react","MXUILayoutColumn.react","MXUILayoutFillColumn.react","MXUISpan.react","React","cx","fbt","ix"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s=o.PropTypes,t=o.createClass({displayName:"MP2PTransactionHistoryCell",proTypes:{amountWithZeros:s.string.isRequired,currency:s.string.isRequired,friend:s.object.isRequired,onRowClick:s.func.isRequired,paymentItem:s.object,statusText:s.string.isRequired,viewerIsSender:s.bool},handleFriendLinkOnClick:function u(event){event.stopPropagation()},render:function u(){__p&&__p();var v=this.props.paymentItem,w=void 0,x=void 0,y=void 0,z=this.props.viewerIsSender,A=this.props.friend,B=this.props.statusText,C=q._("Unavailable");if(!A.name)A.full_name=C;if(!A.profile_uri)A.profile_uri="#";if(v){if(v.thumb_url)w=o.createElement("div",{className:"_5hjz",style:{backgroundImage:"url("+v.thumb_url+")"}});else w=o.createElement(h,{height:50,src:r("94396"),width:50});x=v.name;y=v.target_url||"#"}else{w=o.createElement(h,{height:50,src:A.picture,width:50});x=A.full_name;y=A.profile_uri}return o.createElement(j,{onClick:this.props.onRowClick,padding:"medium"},o.createElement(k,{className:"_3-8r _5hj_"},o.createElement(l,null,o.createElement("a",{href:y,onClick:this.handleFriendLinkOnClick},w)),o.createElement(m,{className:"_3-9a"},o.createElement(i,{alignv:"middle",height:50},o.createElement(j,{className:"_3-94"},o.createElement("a",{href:y,onClick:this.handleFriendLinkOnClick},o.createElement(n,{fontshade:"dark"},x))),o.createElement(j,{fontshade:"light",fontsize:"small"},B))),o.createElement(l,{fontshade:"light"},o.createElement(i,{alignv:"middle",height:50},(z?"-":"")+this.props.currency+this.props.amountWithZeros))))}});f.exports=t}),null);
__d("P2PPaymentRequestStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7})}),null);
__d("P2PTransferStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19})}),null);
__d("XP2PPaymentRequestReceiptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/p2p/payment_request/",{id:{type:"String",required:true}})}),null);
__d("XP2PTransactionDetailController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/p2p/transaction/",{id:{type:"String",required:true}})}),null);
__d("MP2PTransactionHistory.react",["CurrentUser","Image.react","P2PPaymentRequestStatus","P2PTransferParam","P2PTransferStatus","MP2PAPI","MP2PTransactionHistoryCell.react","MXUICard.react","MXUIDiv.react","React","XP2PPaymentRequestReceiptController","XP2PTransactionDetailController","cx","fbt","formatDate","ix"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"use strict";__p&&__p();var x,y;x=babelHelpers.inherits(z,q.Component);y=x&&x.prototype;function z(){__p&&__p();var A,B;for(var C=arguments.length,D=Array(C),E=0;E<C;E++)D[E]=arguments[E];return B=(A=y.constructor).call.apply(A,[this].concat(D)),this.state={transactions:null,isRequestsLoading:false,isTransactionsLoading:false,errorMessage:null},this.fetchTransactions=function(){this.setState({isTransactionsLoading:true,errorMessage:null,transactions:null});this.$MP2PTransactionHistory2=m.getTransactions({success:function(F){delete this.$MP2PTransactionHistory2;this.setState({transactions:F,isTransactionsLoading:false,errorMessage:null})}.bind(this),error:function(F){delete this.$MP2PTransactionHistory2;this.setState({errorMessage:F,transactions:null,isTransactionsLoading:false})}.bind(this)})}.bind(this),this.fetchPaymentRequests=function(){this.setState({isRequestsLoading:true,errorMessage:null,paymentRequests:null});this.$MP2PTransactionHistory1=m.getPaymentRequests({success:function(F){delete this.$MP2PTransactionHistory1;this.setState({paymentRequests:F,isRequestsLoading:false,errorMessage:null})}.bind(this),error:function(F){delete this.$MP2PTransactionHistory1;this.setState({errorMessage:F,paymentRequests:null,isRequestsLoading:false})}.bind(this)})}.bind(this),this.handleFriendLinkOnClick=function(event){event.stopPropagation()},this.handleTransactionClick=function(F){var G=s.getURIBuilder().setString("id",F).getURI();G.go()},this.handlePaymentRequestClick=function(F){var G=r.getURIBuilder().setString("id",F).getURI();G.go()},this.getFormattedDate=function(F){return v(F,{today:"g:ia",withinWeek:"D",thisYear:"M j",older:"M j"})},this.getTransferStatusTextFromEnum=function(F){__p&&__p();var G=this.getFormattedDate(F.creationTime),H=u._("Pending"),I=u._("Cancelled"),J=void 0;if(F.paymentItem)J=u._("Paid {date}",[u.param("date",G)]);else J=u._("Sent {date}",[u.param("date",G)]);var K=u._("Received {date}",[u.param("date",G)]),L=F.sender.id===h.getID(),M=!L&&F.receiver.id!==h.getID(),N=F[k.STATUS];switch(N){case l.COMPLETED:return L||M?J:K;case l.INTERMEDIATE_PROCESSING:case l.PENDING_RECIPIENT_PROCESSING:case l.PENDING_RECIPIENT_NUX:case l.PENDING_RECIPIENT_VERIFICATION:case l.PENDING_RECIPIENT_MANUAL_REVIEW:case l.PENDING_RECIPIENT_VERIFICATION_PROCESSING:case l.PENDING_PUSH_FAIL:case l.PENDING_SENDER_INITED:return L||M?J:H;case l.PENDING_SENDER_MANUAL_REVIEW:case l.PENDING_SENDER_VERIFICATION:case l.PENDING_SENDER_VERIFICATION_PROCESSING:return H;case l.CANCELED_SENDER_RISK:case l.CANCELED_DECLINED:case l.CANCELED_RECIPIENT_RISK:case l.CANCELED_SYSTEM_FAIL:case l.CANCELED_EXPIRED:case l.CANCELED_SAME_CARD:return I;default:return H}}.bind(this),this.getPaymentRequestStatusTextFromEnum=function(F){__p&&__p();var G=this.getFormattedDate(F.creationTime),H=F.currentStatus,I=u._("Request cancelled {date}",[u.param("date",G)]),J=u._("Request paid {date}",[u.param("date",G)]),K=u._("Request declined {date}",[u.param("date",G)]),L=u._("Request unpaid {date}",[u.param("date",G)]),M=void 0;switch(H){case j.DECLINED:M=K;break;case j.CANCELED:case j.TRANSFER_FAILED:M=I;break;case j.TRANSFER_COMPLETED:M=J;break;default:M=L;break}return M}.bind(this),this.renderTransaction=function(F){var G=F.sender.id===h.getID(),H=G?F.receiver:F.sender,I=F[k.TRANSFER_ID];return q.createElement(n,{amountWithZeros:F.amountWithZeros,creationTime:F.creationTime,currency:F.currency,friend:H,key:I,onRowClick:function(){this.handleTransactionClick(I)}.bind(this),paymentItem:F.paymentItem,statusText:this.getTransferStatusTextFromEnum(F),viewerIsSender:G})}.bind(this),this.renderPaymentRequest=function(F){var G=F.requester.id===h.getID()?F.requestee:F.requester,H=F.id;return q.createElement(n,{amountWithZeros:F.amountWithZeros,creationTime:F.creationTime,currency:F.currencySymbol,friend:G,key:H,onRowClick:function(){this.handlePaymentRequestClick(H)}.bind(this),statusText:this.getPaymentRequestStatusTextFromEnum(F),viewerIsSender:F.requestee.id===h.getID()})}.bind(this),B}z.prototype.componentWillMount=function(){this.fetchTransactions();this.fetchPaymentRequests()};z.prototype.componentWillUnmount=function(){this.$MP2PTransactionHistory1&&this.$MP2PTransactionHistory1.abort();this.$MP2PTransactionHistory2&&this.$MP2PTransactionHistory2.abort()};z.prototype.render=function(){__p&&__p();var A=u._("Payment History"),B=[],C=null,D=this.state.transactions;if(D!=null&&D.length>0)B=D.map(this.renderTransaction);else if(D&&D.length===0){var E=u._("You haven't received any payments yet.");C=q.createElement(p,{padding:"medium"},q.createElement(p,{className:"_3-8r"},E))}var F=[],G=this.state.paymentRequests;if(G!=null&&G.length>0)F=G.map(this.renderPaymentRequest);var H=null;if(this.state.isTransactionsLoading||this.state.isRequestsLoading)H=q.createElement(p,{padding:"medium",textalign:"center"},q.createElement(i,{height:24,src:w("101346"),width:24}));var I=B.concat(F);I=I.sort(function(K,L){return L.props.creationTime-K.props.creationTime});var J=null;if(this.state.errorMessage)J=q.createElement(p,{padding:"medium"},q.createElement(p,{className:"_3-8r"},this.state.errorMessage));return q.createElement(o,this.props,q.createElement(p,{fontshade:"light",fontsize:"smallcaps",fontweight:"bold",padding:"medium"},q.createElement(p,{className:"_3-8r"},A)),I,C,H,J)};f.exports=z}),null);
__d("MP2PSettingsPage.react",["React","MP2PAddCreditCard.react","MP2PCreditCardPage.react","MP2PDPONotification.react","MP2PSelectCreditCard.react","MP2PTransactionHistory.react","MP2PPhysicalAddressComponent.react","MXUIDiv.react","P2PGKValues","cx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r,s;r=babelHelpers.inherits(t,h.Component);s=r&&r.prototype;function t(){__p&&__p();var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=s.constructor).call.apply(u,[this].concat(x)),this.state={creditCardMutated:false,creditCardToView:null,isAddingCreditCard:false,isP2PEligible:p.P2PEligible,isViewingCreditCard:false},this.handleOnAddNewCardSelected=function(){this.setState({isAddingCreditCard:true})}.bind(this),this.handleOnCreditCardAdded=function(){this.setState({isAddingCreditCard:false});this.refs.selectCreditCard.fetchCreditCards()}.bind(this),this.handleOnAddCreditCardBack=function(){this.setState({isAddingCreditCard:false})}.bind(this),this.handleOnCreditCardSelected=function(z){this.setState({creditCardToView:z,isViewingCreditCard:true})}.bind(this),this.handleOnCreditCardUpdated=function(z){if(this.state.creditCardToView.getCredentialId()!==z.getCredentialId()){this.refs.selectCreditCard.fetchCreditCards();return}this.state.creditCardToView.setExp(z.getExp());this.state.creditCardToView.setZipCode(z.getZipCode());this.setState({creditCardMutated:true,creditCardToView:this.state.creditCardToView})}.bind(this),this.handleOnCreditCardDeleted=function(){this.setState({creditCardMutated:true,creditCardToView:null,isViewingCreditCard:false},function(){this.handleOnViewCreditCardBack()}.bind(this))}.bind(this),this.handleOnCreditCardSetPrimary=function(){this.state.creditCardToView.setIsPreset(true);this.setState({creditCardMutated:true,creditCardToView:this.state.creditCardToView})}.bind(this),this.handleOnViewCreditCardBack=function(){if(this.state.creditCardMutated)this.refs.selectCreditCard.fetchCreditCards();this.setState({creditCardMutated:false,isViewingCreditCard:false})}.bind(this),v}t.prototype.render=function(){__p&&__p();var u=null,v=null;if(this.state.isAddingCreditCard)u=h.createElement(i,{onCreditCardAdded:this.handleOnCreditCardAdded,onBack:this.handleOnAddCreditCardBack});else if(this.state.isViewingCreditCard)v=h.createElement(j,{creditCard:this.state.creditCardToView,onBack:this.handleOnViewCreditCardBack,onCreditCardDeleted:this.handleOnCreditCardDeleted,onCreditCardSetPrimary:this.handleOnCreditCardSetPrimary,onCreditCardUpdated:this.handleOnCreditCardUpdated});var w=!p.PaymentsEnabled?h.createElement(k,null):null,x=null;if(this.state.isP2PEligible)x=h.createElement(l,{onAddNewCardSelected:this.handleOnAddNewCardSelected,onCreditCardSelected:this.handleOnCreditCardSelected,ref:"selectCreditCard"});var y=this.state.isAddingCreditCard||this.state.isViewingCreditCard;return h.createElement(o,null,u,v,h.createElement(o,{className:y?"_8b1":"",padding:"large"},h.createElement(n,null),w,x,h.createElement(m,{className:(this.state.isP2PEligible?"_3-8z":"")+" _3-97"})))};f.exports=t}),null);